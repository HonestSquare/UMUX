// ==============================<UMUX 2.0 B>========================================
//	UMUX Beta Program(ì´í•˜ UMBP)ì€ ìœ ì¦ˆë§µ ëŒ€í‘œì¹´í˜(ì´í•˜ UM)ì—ì„œ ì§„í–‰í•˜ê³  ìˆëŠ” í•œêµ­ì–´í™” ìœ ì¦ˆë§µ ë´‡ë°© í”„ë¡œì íŠ¸ì˜ ì¼í™˜ìœ¼ë¡œ, 
//	ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI)ë¿ë§Œ ì•„ë‹ˆë¼ í”Œë ˆì´ì˜ ë§¤ì‚¬ ëª¨ë“  ìˆœê°„ê¹Œì§€ ì•„ìš°ë¥´ëŠ” ì‚¬ìš©ì ê²½í—˜(UX)ì„ ë³´ë‹¤ ë¹ ë¥´ê²Œ ì‹ ë²„ì „ì„ ì²´í—˜í•´ ë³¼ ìˆ˜ ìˆëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.
//	ë³¸ ë² íƒ€ í”„ë¡œê·¸ë¨ì— ì°¸ê°€ ë° ì´ìš©í•˜ë¼ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì— ë”°ë¼ì•¼ í•©ë‹ˆë‹¤.
//
//
//	* ì›ì €ì‘ì í‘œê¸°
//	* ìˆ˜ì • í›„ ì¬ë°°í¬ ê¸ˆì§€
//	* UMUX ë²„ì „ í‘œê¸°(ì˜ˆ: Based on UMUX 2.0.0_t4)
//	* UMUX Beta Programì„ì„ í™•ì¸í•  ìˆ˜ ìˆê²Œ ë°©ì œì—ë„ í‘œê¸°
//		ì˜ˆ: [UMBP] í•«íœ´ 3ã„·3, [UMUX BETA] í•«íœ´ 3ã„·3
//	* dev ë³€ìˆ˜ì˜ ê°’ì€ trueë¡œ ì´ˆê¸°í™”
// ==================================================================================
function c(msg){ 
	CS.showMsg(" ì™¸ë¶€ (0)ğŸŒì„œë²„ ê´€ë¦¬ì: " + msg + " (ê·“ì†ë§ ë‹µì¥: !e 0 ë‹µí•  ë‚´ìš©)"); 
	SYS.log(true, "ì „ë‹¬: " + msg);
};
// ---------------------ë‚´ì¥ ë§µ--------------------------------------
var maps = new Array();
var mapsName = new Array();
{
mapsName[0] = "Classic R";
maps[0] = 
`{
	//	RELEASE_DATE:	2019-07-31
	//	MADE BY			ì •ì§í•œë„¤ëª¨í˜•â„¢
	//	CODE_NAME:		CROP-MK
	//	MODEL_NAME:		Classic R
	//	VERSION:		Update 1(v1.10)
	//	SUPPORT_LEVEL:	
	//					1(1.0.0)/2(1.1.0)/3(1.1.1)/4(1.1.2)/5(2.0.0_beta)
	//	ë³¸ ë§µì€ UMUXì— íƒ‘ì¬ëœ ê¸°ë³¸ ë§µì…ë‹ˆë‹¤. 
	//	UMUX ì´ì™¸ì— ì–´ë– í•œ ìš©ë„ì˜ ìˆ˜ì • ë° ì¬ë°°í¬ ë˜ëŠ” ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë©° ì´ì— ë”°ë¥¸ ì±…ì„ì€ ëª¨ë‘ ì´ìš©ì ë³¸ì¸ì—ê²Œ ìˆìŠµë‹ˆë‹¤.
	"name" : "Classic Rop",

	"width" : 420,

	"height" : 200,

	"redSpawnPoints" : [ 
		[-90, 30], [-90,-30],[-200, 70], [-200, -70], [-200, 0], [-300, -30], [-300, 30], [-370, 0], [-480, 100],
	],

	"blueSpawnPoints" : [
		[90, 30], [90,-30],[200, 70], [200, -70], [200, 0], [300, -30], [300, 30], [370, 0], [480, -100],
	],

	"bg" : { "type" : "grass", "width" : 370, "height" : 170, "kickOffRadius" : 75, "cornerRadius" : 10 },

	"vertexes" : [
		/* 0 */ { "x" : -370, "y" : 160, "trait" : "ballArea" },
		/* 1 */ { "x" : -370, "y" : 64, "trait" : "ballArea" },
		/* 2 */ { "x" : -370, "y" : -64, "trait" : "ballArea" },
		/* 3 */ { "x" : -370, "y" : -160, "trait" : "ballArea", "vis" : false, "curve" : 90, "color" : "C7E6BD" },
		/* 4 */ { "x" : 370, "y" : 160, "trait" : "ballArea", "vis" : true, "curve" : 90, "color" : "C7E6BD" },
		/* 5 */ { "x" : 370, "y" : 64, "trait" : "ballArea" },
		/* 6 */ { "x" : 370, "y" : -64, "trait" : "ballArea" },
		/* 7 */ { "x" : 370, "y" : -160, "trait" : "ballArea", "vis" : false, "curve" : -90, "color" : "C7E6BD" },
		
		/* 8 */ { "x" : 0, "y" : 200, "trait" : "kickOffBarrier" },
		/* 9 */ { "x" : 0, "y" : 75, "trait" : "kickOffBarrier" },
		/* 10 */ { "x" : 0, "y" : -75, "trait" : "kickOffBarrier" },
		/* 11 */ { "x" : 0, "y" : -200, "trait" : "kickOffBarrier" },
		
		/* 12 */ { "x" : -380, "y" : -64, "trait" : "goalNet", "color" : "2E2E2E" },
		/* 13 */ { "x" : -400, "y" : -44, "trait" : "goalNet", "color" : "2E2E2E" },
		/* 14 */ { "x" : -400, "y" : 44, "trait" : "goalNet", "color" : "2E2E2E" },
		/* 15 */ { "x" : -380, "y" : 64, "trait" : "goalNet", "color" : "2E2E2E" },
		/* 16 */ { "x" : 380, "y" : -64, "trait" : "goalNet", "color" : "2E2E2E" },
		/* 17 */ { "x" : 400, "y" : -44, "trait" : "goalNet", "color" : "2E2E2E" },
		/* 18 */ { "x" : 400, "y" : 44, "trait" : "goalNet", "color" : "2E2E2E" },
		/* 19 */ { "x" : 380, "y" : 64, "trait" : "goalNet", "color" : "2E2E2E" },
		
		/* 20 */ { "x" : -370, "y" : 160, "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea", "vis" : false, "curve" : -90, "color" : "C7E6BD" },
		/* 21 */ { "x" : -360, "y" : 170, "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea", "vis" : false, "curve" : -90, "color" : "C7E6BD" },
		/* 22 */ { "x" : -360, "y" : -170, "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea", "vis" : false, "curve" : 90, "color" : "C7E6BD" },
		/* 23 */ { "x" : 360, "y" : 170, "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea", "vis" : false, "curve" : 90, "color" : "C7E6BD" },
		/* 24 */ { "x" : 360, "y" : -170, "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea", "vis" : false, "curve" : -90, "color" : "C7E6BD" },
		
		/* 25 */ { "x" : -350, "y" : 1830, "cMask" : ["wall" ], "cGroup" : ["wall" ] },
		/* 26 */ { "x" : 350, "y" : 1830, "cMask" : ["wall" ], "cGroup" : ["wall" ] }

	],

	"segments" : [
		{ "v0" : 0, "v1" : 1, "trait" : "ballArea" },
		{ "v0" : 2, "v1" : 3, "trait" : "ballArea" },
		{ "v0" : 4, "v1" : 5, "trait" : "ballArea" },
		{ "v0" : 6, "v1" : 7, "trait" : "ballArea" },
		
		{ "v0" : 12, "v1" : 13, "curve" : -90, "color" : "2E2E2E", "trait" : "goalNet" },
		{ "v0" : 13, "v1" : 14, "color" : "2E2E2E", "trait" : "goalNet" },
		{ "v0" : 14, "v1" : 15, "curve" : -90, "color" : "2E2E2E", "trait" : "goalNet" },
		{ "v0" : 16, "v1" : 17, "curve" : 90, "color" : "2E2E2E", "trait" : "goalNet" },
		{ "v0" : 17, "v1" : 18, "color" : "2E2E2E", "trait" : "goalNet" },
		{ "v0" : 18, "v1" : 19, "curve" : 90, "color" : "2E2E2E", "trait" : "goalNet" },
		
		{ "v0" : 8, "v1" : 9, "trait" : "kickOffBarrier" },
		{ "v0" : 9, "v1" : 10, "curve" : 180, "cGroup" : ["blueKO" ], "trait" : "kickOffBarrier" },
		{ "v0" : 9, "v1" : 10, "curve" : -180, "cGroup" : ["redKO" ], "trait" : "kickOffBarrier" },
		{ "v0" : 10, "v1" : 11, "trait" : "kickOffBarrier" },
		
		{ "v0" : 20, "v1" : 21, "curve" : -90, "vis" : false, "color" : "C7E6BD", "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea" },
		{ "v0" : 3, "v1" : 22, "curve" : 90, "vis" : false, "color" : "C7E6BD", "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea" },
		{ "v0" : 4, "v1" : 23, "curve" : 90, "vis" : true, "color" : "C7E6BD", "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea" },
		{ "v0" : 7, "v1" : 24, "curve" : -90, "vis" : false, "color" : "C7E6BD", "bCoef" : 1, "cMask" : ["ball" ], "trait" : "ballArea" }

	],

	"goals" : [
		{ "p0" : [-370,-64 ], "p1" : [-370,64 ], "team" : "red" },
		{ "p0" : [370,64 ], "p1" : [370,-64 ], "team" : "blue" }

	],

	"discs" : [
		{ "pos" : [-370,64 ], "color" : "F6CECE", "trait" : "goalPost" },
		{ "pos" : [-370,-64 ], "color" : "F6CECE", "trait" : "goalPost" },
		{ "pos" : [370,64 ], "color" : "CECEF6", "trait" : "goalPost" },
		{ "pos" : [370,-64 ], "color" : "CECEF6", "trait" : "goalPost" }

	],

	"planes" : [
		{ "normal" : [0,1 ], "dist" : -170, "trait" : "ballArea" },
		{ "normal" : [0,-1 ], "dist" : -170, "trait" : "ballArea" },
		
		{ "normal" : [0,1 ], "dist" : -200, "bCoef" : 0.1 },
		{ "normal" : [0,-1 ], "dist" : -200, "bCoef" : 0.1 },
		{ "normal" : [1,0 ], "dist" : -420, "bCoef" : 0.1 },
		{ "normal" : [-1,0 ], "dist" : -420, "bCoef" : 0.1 }

	],

	"traits" : {
		"ballArea" : { "vis" : false, "bCoef" : 1, "cMask" : ["ball" ] },
		"goalPost" : { "radius" : 8, "invMass" : 0, "bCoef" : 0.5 },
		"goalNet" : { "vis" : true, "bCoef" : 0.1, "cMask" : ["ball" ] },
		"kickOffBarrier" : { "vis" : false, "bCoef" : 0.1, "cGroup" : ["redKO","blueKO" ], "cMask" : ["red","blue" ] }

	}
}
`
}
//=======================================================================
// ì—¬ê¸°ì„œë¶€í„° ë³µì‚¬
//=======================================================================
//-----------------------------------------------------------------------
// ë°© ì´ˆê¸° ì„¤ì • 
//-----------------------------------------------------------------------
// ë°© ì´ë¦„
const ROOMNAME = "[UMBP] UMUX ë² íƒ€ í…ŒìŠ¤íŠ¸";
const MAXPLAYERS = 15;				// í”Œë ˆì´ì–´ ìµœëŒ€ ì¸ì›
const PLAYERNAME = " ";				// ë°©ì¥ ì´ë¦„(ê·¸ëŒ€ë¡œ ë‘ëŠ” ê±¸ ê¶Œì¥)
const PUBLIC = true;				// ê³µê°œë°© ì—¬ë¶€
// token; You can obtain it here: https://www.haxball.com/rs/api/getheadlesstoken
const TOKEN = "thr1.AAAAAF3yF1QlwxQHXMC5Mg.KE1oPuNibF0";
const NOPLAYER = false;				// ë°©ì¥ ì—¬ë¶€(ê·¸ëŒ€ë¡œ ë‘ëŠ” ê±¸ ê¶Œì¥)
const room = HBInit({ 
		roomName: ROOMNAME, maxPlayers: MAXPLAYERS, playerName : PLAYERNAME, public : PUBLIC, token : TOKEN,		
		geo: { code: "kr", lat: 37.566667, lon: 126.978406},					// ì§€ì—­, ìœ„ë„, ê²½ë„(ëŒ€í•œë¯¼êµ­ ì„œìš¸ì„ ê¸°ì¤€ìœ¼ë¡œ ê¸°ë³¸ê°’ì„ ì„¤ì •í•´ ë‘ì—ˆìŒ)
		noPlayer : NOPLAYER										
	});
room.setCustomStadium(maps[0]);
room.setScoreLimit(0);
room.setTimeLimit(0);

const dev = true;					// ê°œë°œ ë²„ì „ ì„¤ì •
var date = new Date();

//-----------------------------------------------------------------------
// ê²Œì„ ë§¤ë‹ˆì € í´ë˜ìŠ¤
//-----------------------------------------------------------------------
class GameManager{													
	constructor(){
		this.gamestats;											// 0: ì •ì§€, 1: ì‹œì‘, 2: ê²Œì„ ì¤‘
		this.error 			= false;							// ì—ëŸ¬ ì—¬ë¶€(Bad actor)
		this.ballPos 		= {"x": null, "y": null};			// ê³µ ì¢Œí‘œ
		this.stateRecording = false;
		this.limitTime = 5;

		this.onGameStart = function(){							// ê²Œì„ ì‹œì‘
			GM.gamestats = 1;
			SYS.log(true, "ê²Œì„ ì‹œì‘.");
			return false;
		}
		this.onGameTick = function(){							// ê²Œì„ ë„ì¤‘
			PS.members = room.getPlayerList();
			GM.ballPos = room.getBallPosition();
			if(GM.gamestats != 2) GM.gamestats = 2;
			return false;
		}
		this.onGameStop = function(){							// ê²Œì„ ì¢…ë£Œ
			GM.gamestats = 0;
			SYS.log(true, "ê²Œì„ ì¢…ë£Œ");
		}
		this.onGamePause = function(byPlayer){ 					// ê²Œì„ ì¤‘ë‹¨
			if(byPlayer.id) SYS.log(true, byPlayer.name + "(ì´)ê°€ ê²Œì„ì„ ì¼ì‹œ ì¤‘ë‹¨í•¨.");
			else SYS.log(true, "ê²Œì„ ì¼ì‹œ ì¤‘ë‹¨.");		// ì™¸ë¶€ ì…ë ¥ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ í”Œë ˆì´ì–´ ì´ë¦„ ê°€ë¦¼
			return false;
		}	
		this.onGameUnpause 	= function(byPlayer){				// ê²Œì„ ì¬ê°œ
			if(byPlayer.id) SYS.log(true, byPlayer.name + "(ì´)ê°€ ê²Œì„ì„ ì¬ê°œí•¨.");
			else SYS.log(true, "ê²Œì„ ì¬ê°œ.");			// ì™¸ë¶€ ì…ë ¥ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ í”Œë ˆì´ì–´ ì´ë¦„ ê°€ë¦¼
			return false;
		}
		this.onPlayerJoin = function(player) {											// í”Œë ˆì´ì–´ ì…ì¥
			let name;
			PS.members = room.getPlayerList();
			PS.cntPlayers++;
			CS.getSpace(player.name) == true ? name = "ê³µë°±" : name = player.name;
			CS.showMsg("This Room Only Supports Korean Language. :", player.id);		
			NC.devCheck(player);								// ê°œë°œì ë²„ì „ ì²´í¬		
																// ì•ˆë‚´ ë©”ì‹œì§€
			if(PS.cntPlayers > 1) CS.alltoChat(player, NC.notice() + name + "ë‹˜ì´ ì…ì¥í–ˆìŠµë‹ˆë‹¤.", true);
			PS.setAddress(player.id, player.conn);				// ê³µìš© ì£¼ì†Œ ë¶€ì—¬
			PS.setPublicID(player.id, player.auth);				// ê³µìš© ì•„ì´ë”” ë¶€ì—¬
																// ì‚¬ì¹­, ë‹¤ì¤‘ ì ‘ì†, ë¸”ë™ë¦¬ìŠ¤íŠ¸ íƒì§€
			if(AMN.filterPlayer(player)){ 
				NC.announce(NC.notice() + name + "ë‹˜ì€ ê´€ì‹¬ ëŒ€ìƒì…ë‹ˆë‹¤.", player.id, "red", 5, 3);
				SYS.log(true, "ì…ì¥: " + name + "(ë¸”ë™ë¦¬ìŠ¤íŠ¸)");
			}
			else{ 
				NC.announce('#' + player.id + " ì•ˆë…•í•˜ì„¸ìš”, " + name + "ë‹˜! (ìœ ìš©í•  ë„ì›€ë§: !help, !join)", player.id, null, 1, 1);
				(PS.cntPlayers >= 10) ? SYS.log(true, "ì…ì¥: " + '(' + SYS.setLine(player.id, 2) + ')' + name) : SYS.log(true, "ì…ì¥: " + '(' + player.id + ')' + name);
			}
			if(PS.cntPlayers <= 1){
				room.startGame();
				room.setPlayerTeam(player.id, 1);	
			}
			PS.getNumbers();																// í• ë‹¹
			AMN.updateAdmins(player);
			SYS.log(true, "[ìë™ì§„í–‰ì‹œìŠ¤í…œ] í˜„ì¬ ë°© ì ‘ì† ì¸ì›: " + PS.cntPlayers);
			return false;
		}
		this.onPlayerLeave = function(player) {											// í”Œë ˆì´ì–´ í‡´ì¥
			let name;
			PS.members = room.getPlayerList();
			CS.getSpace(player.name) == true ? name = "ê³µë°±" : name = player.name;
			if(AMN.kicked)											// ê°•ì œ í‡´ì¥ í™•ì¸
				AMN.kicked = false;
			else{
				NC.announce(NC.notice() + name + "ë‹˜ì´ ë– ë‚¬ìŠµë‹ˆë‹¤.", null, "green", 5, 1);
				if(AMN.checkBlacklists(player.name)) name = player.name + "(ë¸”ë™ë¦¬ìŠ¤íŠ¸)";
				PS.cntPlayers >= 10 ? SYS.log(true, "í‡´ì¥: " + '(' + SYS.setLine(player.id, 2) + ')' + name) : SYS.log(true, "í‡´ì¥: " + '(' + player.id + ')' + name);
			}
			AMN.subAdmin[player.id - 1] = false;
			PS.playersid[player.id] = null;
			AMN.cntSubAdmins--;
			// ìœ ì € ëª©ë¡ ì •ë¦¬
			PS.updatePlayers(player);  
			PS.cntPlayers--;
			// ì‚¬ëŒì´ ì—†ìœ¼ë©´ ìë™ ì¢…ë£Œ
			if(PS.cntPlayers > 0) AMN.updateAdmins(PS.members[0]);	// ê¶Œí•œ ì—¬ë¶€ í™•ì¸
			else room.stopGame();
			SYS.log(true, "[ìë™ì§„í–‰ì‹œìŠ¤í…œ] í˜„ì¬ ë°© ì ‘ì† ì¸ì›: " + PS.cntPlayers);
			return false;
		}
		this.onStadiumChange = function(name){				// ë§µ êµì²´
			if(!SYS.getInit()) return SYS.setInit();
			if(PS.cntPlayers){
				if((AMN.mapLock[1] == true)){
						room.setCustomStadium(AMN.mapLock[0]);
						NC.announce(NC.cnot() + "ë§µì´ ê³ ì •ë¼ìˆì–´ ë§µì„ êµì²´í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.", null, "green", 5, 3);
				}
				else{
					SYS.log(true, "ë§µ êµì²´: " + name);
					if(Math.floor(Math.random()*6) == 0) NC.announce(NC.msgCommand("ë§µ ì €ì¥ ") + "/store", null, "green", 4, 3);
				}
			}
			return (SYS.getInit()) ? false : SYS.setInit();
		}
		this.onPositionsReset = function(){		 				// ì¢Œí‘œ ì´ˆê¸°í™”
			return false; 
		}
		this.onPlayerBallKick = function(player){ 				// ê³µ ì°¼ì„ ë•Œ
			return false; 
		}
		this.onTeamGoal = function(team){ 						// ê³¨ ë¨¹í ë•Œ			
			var time = room.getScores().time;
			time = Math.floor(time);
			time = TM.updateNums(Math.floor(time / 60), 2) + ':' + TM.updateNums(time % 60, 2);
			switch(team){
				case 1:
					NC.announce(PS.mark[team + 4] + '|' + time + "| " 
					+ "ë ˆë“œíŒ€ì´ ë“ì í–ˆìŠµë‹ˆë‹¤.", null, null, 4, 1);
					SYS.log(true, "ë ˆë“œíŒ€ ë“ì ");
					break;
				case 2:
					NC.announce(PS.mark[team + 4] + '|' + time + "| " 
					+ "ë¸”ë£¨íŒ€ì´ ë“ì í–ˆìŠµë‹ˆë‹¤.", null, null, 4, 1);
					SYS.log(true, '|' + time + "| " + "ë¸”ë£¨íŒ€ ë“ì ");
					break;
			}
			return false; 
		}
		this.onTeamVictory = function(scores){ 												//					 íŒ€ ìŠ¹ë¦¬
			SYS.log(true, "ê²½ê¸° ì¢…ë£Œ");
			NC.announce("[ê²½ê¸° ì¢…ë£Œ]", null, "yellow", 5, 0);
		}
		this.onRoomLink = function(address){					// ë§í¬
			NC.announce(NC.info() + address, null, null, 4, 3);
		}
		this.onKickRateLimitSet = function(						// í‚¥ ì œí•œ ì„¤ì •
			min, rate, burst, player){
				NC.announce(NC.notice() 
				+ "ìµœì†Œ: " + min + ' '
				+ "ë¹„ìœ¨: " + rate + ' '
				+ "burst: " + burst + ' ',
				null, null, 4, 3);
				return false;
		}
		this.startRecording = function(){ 						// ë…¹í™” ì‹œì‘
			GM.stateRecording = true;
			room.startRecording();
			NC.announce(TM.showTime() + " â–¶ ë…¹í™” ì‹œì‘", null, "yellow", 5, 3);
			SYS.log(true, "ë…¹í™” ì‹œì‘");
			return false;
		}
		this.stopRecording = function(){ 						// ë…¹í™” ì¢…ë£Œ
			GM.stateRecording = false;
			room.stopRecording();
			NC.announce(TM.showTime() + " â¸ ë…¹í™” ì¢…ë£Œ", null, "yellow", 5, 3);
			SYS.log(true, "ë…¹í™” ì¢…ë£Œ");
			return false;
		}
	}
}
//-----------------------------------------------------------------------
// ê´€ë¦¬ í´ë˜ìŠ¤
//-----------------------------------------------------------------------
class Administration{												
	constructor() {
		this.cntAdmins 			= 0;					// ê´€ë¦¬ì ì¸ì›
		this.cntSubAdmins 		= 0;					// ë³´ì¡° ê´€ë¦¬ì ì¸ì›
		this.kicked 			= false;				// ê°•ì œ í‡´ì¥ ì—¬ë¶€
		this.dynamicAdmin 		= true;		 			// ê¶Œí•œ ë™ì  í• ë‹¹
		this.subAdmin 			= new Array(15);		// ë³´ì¡° ê¶Œí•œ(ë¶€ ì–´ë“œë¯¼)
		this.teamsLock 			= false;				// ì±„íŒ… ì ê¸ˆ
		this.hostLock 			= true;					// ë°©ì¥ íŒ€ ì´ë™ í—ˆìš© ì—¬ë¶€
		this.mapLock 			= [null, false];		// ë§µ ê³ ì •(ë§µ ë°ì´í„°, ê³ ì • ì—¬ë¶€)
		this.mutedList 			= [];					// ì±„ê¸ˆì ëª©ë¡
		this.password 			= null;					// ë¹„ë°€ë²ˆí˜¸

		this.onPlayerAdminChange = function(player){		//							 	í”Œë ˆì´ì–´ ê¶Œí•œ íšë“&ë°•íƒˆ
			if(AMN.checkBlacklists(player.name)){ 						// ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê¶Œí•œ ë¶€ì—¬ ë°°ì œ ëŒ€ìƒ
				room.setPlayerAdmin(player.id, false);
				AMN.subAdmin[player.id - 1] = false;
				PS.updateMarks(player);
			}
			if(!AMN.checkAdmins) AMN.getSubAdmin(player);		// ê´€ë¦¬ìê°€ ì—†ìœ¼ë©´ ë³´ì¡° ê¶Œí•œ ë¶€ì—¬
			else{
				if(player.admin){				// í”Œë ˆì´ì–´ê°€ ê´€ë¦¬ìë©´ ë³´ì¡° ê¶Œí•œ ì§€ìš°ê¸°
					AMN.subAdmin[player.id - 1] = false;
					AMN.cntSubAdmins--;
				}
				else AMN.getSubAdmin(player);
			}
			return false;
		}
		this.onPlayerKicked = function(kickedPlayer, reason, ban, byPlayer){			//	í”Œë ˆì´ì–´ ê°•ì œ í‡´ì¥
			let banMsg;
			AMN.kicked = true;

			if(ban) banMsg = "ì˜êµ¬";
			else banMsg = "ê°•ì œ";
			
			if(reason){ 
				if(reason == "Bad actor"){ 
					GM.error = false;
					AMN.kicked = false;
					if(CS.getSpace(kickedPlayer.name)) NC.announce(NC.notice() + "ê³µë°±ë‹˜ì´ ì˜¤ë¥˜ ê°ì§€ ì‹œìŠ¤í…œìœ¼ë¡œ ì¸í•´ í‡´ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.", null, "green", 5, 1);
					else NC.announce(NC.notice() + kickedPlayer.name + "ë‹˜ì´ ì˜¤ë¥˜ ê°ì§€ ì‹œìŠ¤í…œìœ¼ë¡œ ì¸í•´ í‡´ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.", null, "green", 5, 1);
					SYS.log(true, kickedPlayer.name + "(ì´)ê°€ ì˜¤ë¥˜ë¡œ ì¸í•´ "+ banMsg + "í‡´ì¥ë¨.");
				}
				else if(byPlayer.id > 0) SYS.log(true, byPlayer.name + "(ì´)ê°€ " + kickedPlayer.name + "(ì„)ë¥¼ " + banMsg + " í‡´ì¥í•¨. (ì‚¬ìœ : " + reason + ')');
				else SYS.log(true, kickedPlayer.name + "(ì„)ë¥¼ " + banMsg + " í‡´ì¥í•¨. (ì‚¬ìœ : " + reason + ')');
			}
			else if(byPlayer.id > 0) SYS.log(true, byPlayer.name + "(ì´)ê°€ " + kickedPlayer.name + "(ì„)ë¥¼ " + banMsg + " í‡´ì¥í•¨.");
			else SYS.log(true, kickedPlayer.name + "(ì„)ë¥¼ " + banMsg + " í‡´ì¥í•¨.");

			return false;
		}
		this.adminHelp = function(player){					// !adminhelp				|	ê´€ë¦¬ ëª…ë ¹ì–´
			if (player.admin || AMN.subAdmin[player.id -1])
				NC.announce(NC.msgCommand("ê´€ë¦¬ ") 
				+ "p | !p | !clearbans | !host | !time ìˆ«ì | !set_pw | !score ìˆ«ì | !r | !rr | !load ìˆ«ì | !lock  | !lock_map | !set_pw | !clear_pw | !show_pw | !ë„ " + CM.recommendCom("ê´€ë ¨", "!ahc"), player.id, null, 4, 3);
			else NC.acess(player);
			return false;  // ëª…ë ¹ì–´ í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ
		}
		this.adminComHelp = function(player){				// !ahc						|	ê´€ë¦¬ ëª…ë ¹ì–´ ë„ì›€ë§
			if (player.admin || AMN.subAdmin[player.id -1]){
				NC.announce(NC.msgCommand("ê´€ë¦¬ ") + "p/!p(ê²Œì„ ì¼ì‹œì •ì§€/ì‹œì‘) | !clearbans(ë°´ ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”) | !host(í˜¸ìŠ¤íŠ¸ ì´ë™)", player.id, null, 4, 3);
				NC.announce(NC.msgCommand("ê´€ë¦¬ ") + "!time(ì‹œê°„ ì„¤ì •) | !score(ì ìˆ˜ ì„¤ì •) | !r (ê²Œì„ ìë™ ì§„í–‰) | !rr(ê²Œì„ ì¬ì‹œì‘)", player.id, null, 4, 3);
				NC.announce(NC.msgCommand("ê´€ë¦¬ ") + "!load ID: ë§µ ë¡œë“œ | !lock(íŒ€ ì´ë™ ê¸ˆì§€/í—ˆìš©) | !lock_map(ë§µ ê³ ì •)", player.id, null, 4, 3);
				NC.announce(NC.msgCommand("ê´€ë¦¬ ") + "!set_pw(ë¹„ë²ˆ ì„¤ì •) | !clear_pw(ë¹„ë²ˆ í•´ì œ) | !show_pw(ë¹„ë²ˆ í‘œì‹œ) | !ë„(ë„ë°°ë°©ì§€ë¬¸ì ì¶œë ¥)", player.id, null, 4, 3);
			}
			else NC.acess(player);
			return false;  // ëª…ë ¹ì–´ í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ
		}
		this.updateAdmins = function(player) {				// 								ì–´ë“œë¯¼ ì—†ìœ¼ë©´ ê¶Œí•œ ë¶€ì—¬
			var players = room.getPlayerList().filter((player) => player.id != 0 );
			// ì•„ë¬´ë„ ì•ˆ ë‚˜ê°€ë©´ ë™ì‘ ì—†ìŒ
			if (players.length == 0 ) return; 
			  // ì–´ë“œë¯¼ ë‚˜ê°€ë©´ ì•„ë¬´ ë™ì‘ ì—†ìŒ
			  if (players.find((player) => player.admin) != null ) return; 
			  AMN.secAdmin = true;
			  // ì–´ë“œë¯¼ ì—†ìœ¼ë©´ ë¶€ì—¬
			  if(AMN.dynamicAdmin){
					if(AMN.filterPlayer(player)) return AMN.getSubAdmin(player);
			  		else{
						  room.setPlayerAdmin(player.id, true);
						  if(CS.getSpace(player.name)) NC.announce(NC.notice() + "ê³µë°±ë‹˜ì´ ê¶Œí•œì„ íšë“í–ˆìŠµë‹ˆë‹¤. " + CM.recommendCom("ê´€ë ¨", '!adminhelp'), null, "pink", 5, 2);
						  else NC.announce(NC.notice() + player.name + "ë‹˜ì´ ê¶Œí•œì„ íšë“í–ˆìŠµë‹ˆë‹¤. " + CM.recommendCom("ê´€ë ¨", '!adminhelp'), null, "pink", 5, 2);
						  SYS.log(true, player.name + "(ì´)ê°€ ê¶Œí•œì„ ì–»ìŒ.");
				  }
			  }
		}
		this.updatePassword = function(pass){				// 								ë¹„ë²ˆ ê°±ì‹ 
			AMN.password = pass;
			return room.setPassword(AMN.password);
		}
		this.getAdminstats = function(player){				// 								ì–´ë“œë¯¼ ê¶Œí•œ í™•ì¸
			if(player.admin) return true;
			else return false;
		}
		this.setAdmin = function(player){					// 								ê¶Œí•œ ë™ì  í• ë‹¹ ì˜µì…˜
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				if(!AMN.dynamicAdmin){
					AMN.dynamicAdmin = true;
					NC.announce(NC.unlocked() + 'ë™ì  í• ë‹¹ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', player.id, "red", 5, 1);
					SYS.log(true, player.name + "(ì´)ê°€ ë™ì  í• ë‹¹ì„ í™œìƒí™”í•¨.");
				}
				else{
					AMN.dynamicAdmin = false;
					NC.announce(NC.locked() + 'ë™ì  í• ë‹¹ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', player.id, "red", 5, 1);
					SYS.log(true, player.name + '(ì´)ê°€ ë™ì  í• ë‹¹ì„ ë¹„í™œìƒí™”í•¨.');
				}
			}
			else return NC.acess(player);
			return false;
		}
		this.setScore = function(player, msg){				// !score n 				|	ì ìˆ˜ ë³€ê²½ ëª…ë ¹ì–´(onlyadmin)
			if (player.admin || AMN.subAdmin[player.id - 1] == true){
				if(!GM.gamestats){
					if((msg.substr(6)) >= 0){
						if((msg.substr(6)) < 15){
							room.setScoreLimit(msg.substr(6));
							NC.announce(NC.notice() + 'ì œí•œ ì ìˆ˜ê°€ ' + msg.substr(6) + 'ì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.', null, "yellow", 4, 1);
							SYS.log(true, player.name + '(ì´)ê°€ ì œí•œ ì ìˆ˜ë¥¼ ' + msg.substr(6) + 'ì ìœ¼ë¡œ ë³€ê²½í•¨.');
						}
					}
				}
				else NC.announce(NC.cnot() + "íŒì´ ì™„ì „íˆ ëë‚œ ì´í›„ì— ë‹¤ì‹œ ì‹œë„í•´ ë³´ì„¸ìš”.", player.id, "orange", 5, 3);
			}
			else NC.acess(player);
			return false;  // ëª…ë ¹ì–´ í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ
		}
		this.setTime = function(player, msg){				// !time n					|	ì‹œê°„ ë³€ê²½ ëª…ë ¹ì–´(onlyadmin)
			if (player.admin || AMN.subAdmin[player.id - 1] == true){
				if(!GM.gamestats){
					if((msg.substr(6)) >= 0){
						if((msg.substr(6)) < 15){
							room.setTimeLimit(msg.substr(6));
							NC.announce(NC.notice() + 'ì œí•œ ì‹œê°„ì´ ' + msg.substr(6) + 'ë¶„ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.', null, "yellow", 4, 1);
							SYS.log(true, player.name + '(ì´)ê°€ ì œí•œ ì‹œê°„ì„ ' + msg.substr(6) + 'ë¶„ìœ¼ë¡œ ë³€ê²½í•¨.');
						}
					}
				}
				else NC.announce(NC.cnot() + "íŒì´ ì™„ì „íˆ ëë‚œ ì´í›„ì— ë‹¤ì‹œ ì‹œë„í•´ ë³´ì„¸ìš”.", player.id, "orange", 5, 3);
			}
			else NC.acess(player);
			return false;  // ëª…ë ¹ì–´ í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ
		}
		this.setTeamsLock = function(player){				// !lock					|	 íŒ€ ì´ë™ ê¸ˆì§€/í—ˆìš© ëª…ë ¹ì–´
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				if(!AMN.teamsLock){		// ì°¸ì´ë©´ ê¸ˆì§€, ê±°ì§“ì´ë©´ í—ˆìš©
					AMN.teamsLock = true;
					room.setTeamsLock(AMN.teamsLock);
					NC.announce(NC.locked() + 'íŒ€ ììœ¨ ì´ë™ì´ ê¸ˆì§€ë˜ì—ˆìŠµë‹ˆë‹¤.', null, "pink", 5, 2);
					SYS.log(true, player.name + '(ì´)ê°€ íŒ€ ì´ë™ì„ ê¸ˆì§€í•¨.');
				}
				else{
					AMN.teamsLock = false;
					room.setTeamsLock(AMN.teamsLock);
					NC.announce(NC.unlocked() + 'íŒ€ ììœ¨ ì´ë™ì´ í—ˆìš©ë˜ì—ˆìŠµë‹ˆë‹¤.', null, "pink", 5, 2);
					SYS.log(true, player.name + '(ì´)ê°€ íŒ€ ì´ë™ì„ í—ˆìš©í•¨.');
				}
			}
			else NC.acess(player);
			return false;
		}
		this.setHostLock = function(player){				// !host					|	 ë°©ì¥ íŒ€ ì´ë™ ê¸ˆì§€/í—ˆìš© ëª…ë ¹ì–´
			if(NOPLAYER == true) return NC.acess(player);
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				if(AMN.hostLock == false){
					AMN.hostLock = true;
					NC.announce(NC.unlocked() + "í˜¸ìŠ¤íŠ¸ ì´ë™ì´ ê¸ˆì§€ë˜ì—ˆìŠµë‹ˆë‹¤.", player.id, "green", 5, 3);
					SYS.log(true, player.name + "(ì´)ê°€ ë°©ì¥ íŒ€ ì´ë™ì„ ê¸ˆì§€í•¨.");
				}
				else{
					AMN.hostLock = false;
					NC.announce(NC.locked() + "í˜¸ìŠ¤íŠ¸ ì´ë™ì´ í—ˆìš©ë˜ì—ˆìŠµë‹ˆë‹¤.", player.id, "green", 5, 3);
					SYS.log(true, player.name + "(ì´)ê°€ ë°©ì¥ íŒ€ ì´ë™ì„ í—ˆìš©í•¨.");
					room.setPlayerTeam(0, 0);
				}
			}
			else return NC.acess(player);
			return false;
		}
		this.setAutoReset = function(player){				// !r						|	ê²Œì„ ìë™ ì‹œì‘/ì¢…ë£Œ
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				if(!GM.gamestats) room.startGame();
				else if(GM.gamestats == 2) room.stopGame();
			}
			else return NC.acess(player);
			return false;  // ëª…ë ¹ì–´ í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ
		}
		this.setReset = function(player){					// !rr						|	ê²Œì„ ì¬ì‹œì‘
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				room.stopGame();
				room.startGame();
				SYS.log(true, "ë‹¤ì‹œ ì‹œì‘.");
			}
			return false;  // ëª…ë ¹ì–´ í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ
		}
		this.setPassword = function(player, pass){			// !set_pw string			|	ë¹„ë²ˆ ì„¤ì •
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				if(pass.length <= 10) NC.announce(NC.locked() + "ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. " + CM.recommendCom("ì—°ê´€", "!clear_pw"), player.id, "orange", 5, 0);
				else if(pass.length >= 28) NC.announce(NC.locked() + "ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ê¸¸ì–´ì„œ ì„¤ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", player.id, "orange", 5, 0);
				else{ 
					AMN.updatePassword(pass.substr(8, 20));
					NC.announce(NC.locked() + "ë¹„ë°€ë²ˆí˜¸ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.", null, "pink", 4, 1);
					SYS.log(true, '[' + player.id + ']' + player.name + "(ì´)ê°€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•¨. (" + AMN.password + ')');
				}
			}
			else NC.acess(player);
			return false;
		}
		this.setMapLock = function(player){					// !lock_map				|	ë§µ ê³ ì •
			PS.members = room.getPlayerList();

			if(player.admin || AMN.subAdmin[player.id - 1] == true){ 
				if(!AMN.mapLock[1]){ 
					AMN.mapLock[1] = true;
					for(let i = 1; i <= PS.cntPlayers; i++){
						if(PS.members[i].admin)
							NC.announce(NC.locked() + "ë§µì„ ì ê¶œìŠµë‹ˆë‹¤." + CM.recommendCom("í•´ì œ ", "!lock_map"), PS.members[i].id, "yellow", 5, 1);
						else 
							NC.announce(NC.locked() + "ë§µì´ ì ê²¼ìŠµë‹ˆë‹¤.", PS.members[i].id, "yellow", 5, 1);
					}
					SYS.log(true, '[' + player.id + ']' + player.name + "(ì´)ê°€ ë§µì„ ê³ ì •í•¨.");
				}
				else{
					AMN.mapLock[1] = false;
					for(let i = 1; i <= PS.cntPlayers; i++){
						if(PS.members[i].admin)
							NC.announce(NC.unlocked() + "ë§µì„ í’€ì—ˆìŠµë‹ˆë‹¤." + CM.recommendCom("ì ê¸ˆ ", "!lock_map"), PS.members[i].id, "yellow", 5, 1);
						else 
							NC.announce(NC.unlocked() + "ë§µì´ í’€ë ¸ìŠµë‹ˆë‹¤.", PS.members[i].id, "yellow", 5, 1);
					}
					SYS.log(true, '[' + player.id + ']' + player.name + "(ì´)ê°€ ë§µ ê³ ì •ì„ í•´ì œí•¨.");
				}
			}
			else return NC.acess(player);
			return false;
		}
		this.missPassword = function(player){ 				// 								ì–´ë“œë¯¼ ì „ìš© ëª…ë ¹ì–´ ì˜¤íƒ€ ë°©ì§€
			SYS.log(true, player.name + "(ì´)ê°€ ê´€ë¦¬ì ë¡œê·¸ì¸ì„ ì‹œë„í•¨. (ì‹¤íŒ¨)");
			return false; 
		}
		this.getAdmin = function(player, _msg){				// 								ê¶Œí•œ íšë“
			if (!player.admin){
				if(!AMN.filterPlayer(player)){
					room.setPlayerAdmin(player.id, true);
					AMN.subAdmin[player.id - 1] = false;
					NC.announce(NC.notice() + player.name + 'ë‹˜ì´ ê¶Œí•œì„ íšë“í–ˆìŠµë‹ˆë‹¤. ' + CM.recommendCom("ê´€ë ¨", "!adminhelp"), null, "pink", 5,2);
					SYS.log(true,  '[' + player.id + ']' + player.name + "(ì´)ê°€ ê¶Œí•œì„ ì–»ìŒ.");
				}
			}
			return false; // ëª…ë ¹ì–´ ì…ë ¥í•œ í”ì ì´ ë‚¨ì§€ ì•ŠìŒ
		}
		this.getSubAdmin = function(player){				// 								ë³´ì¡° ê¶Œí•œ íšë“
			if (!player.admin){
				AMN.subAdmin[player.id - 1] = true;	// ë³´ì¡° ê¶Œí•œ ì„¤ì •
				AMN.cntSubAdmins++;					// ë³´ì¡° ê´€ë¦¬ì ê°±ì‹ 
				PS.updateMarks();						// ë§ˆí¬ ê°±ì‹ 
				if(CS.getSpace(player.name)) NC.announce(NC.notice() + "ê³µë°±ë‹˜ì´ ë³´ì¡° ê¶Œí•œì„ íšë“í–ˆìŠµë‹ˆë‹¤. " + CM.recommendCom("ê´€ë ¨", "!adminhelp"), null, "pink", 4, 2);
				else NC.announce(NC.notice() + player.name + "ë‹˜ì´ ë³´ì¡° ê¶Œí•œì„ íšë“í–ˆìŠµë‹ˆë‹¤. " + CM.recommendCom("ê´€ë ¨", "!adminhelp"), null, "pink", 4, 2);
				SYS.log(true,  '[' + player.id + ']' + player.name + "(ì´)ê°€ ë³´ì¡° ê¶Œí•œì„ ì–»ìŒ.");
			}
			return false; // ëª…ë ¹ì–´ ì…ë ¥í•œ í”ì ì´ ë‚¨ì§€ ì•ŠìŒ
		}
		this.getClearBans = function(player){				// 								ê°•ì œ í‡´ì¥ ëª©ë¡ ì´ˆê¸°í™”
			room.clearBans();
			NC.announce(NC.notice() + "Ban ì²˜ë¦¬ ë‚´ì—­ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.", null, "pink", 4, 2);
			if(player) SYS.log(true, '[' + player.id + ']' + player.name + "(ì´)ê°€ ì˜êµ¬ í‡´ì¥ ëª©ë¡ì„ ëª¨ë‘ ì§€ì›€.");
			else SYS.log(true, "ì˜êµ¬ í‡´ì¥ ëª©ë¡ì„ ì´ˆê¸°í™”");
			return false;
		}
		this.checkAdmins = function(){						// 								ê´€ë¦¬ì ì¸ì› ì²´í¬
			var members = room.getPlayerList();
			for(let i = 0; i < PS.cntPlayers; i++){
				if(AMN.getAdminstats(members[i])) AMN.cntAdmins++;
			}
			return AMN.cntAdmins;
		}
		this.checkSubAdmins = function(){					// 								ë³´ì¡° ê´€ë¦¬ì ì¸ì› ì²´í¬
			var members = room.getPlayerList();
			for(let i = 0; i < PS.cntPlayers; i++){
				if(AMN.subAdmin[members[i] - 1]) AMN.cntSubAdmins++;
			}
			return AMN.cntSubAdmins;
		}
		this.setClearBans = function(player){				// !clearbans				|	ê°•ì œ í‡´ì¥ ëª©ë¡ ì´ˆê¸°í™” ëª…ë ¹ì–´
			if (player.admin || AMN.subAdmin[player.id - 1] == true) 
				return AMN.getClearBans(player);
			else 
				return NC.acess(player);
		}
		this.showPassword = function(player){				// !show_pw					| 	ë¹„ë²ˆ ê³µê°œ
			if(player.admin || AMN.subAdmin[player.id - 1] == true){ 
				if(AMN.password) NC.announce(NC.notice() + "í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ëŠ” " + AMN.password + "ì…ë‹ˆë‹¤.", player.id, "green", 4, 0);
				else NC.announce(NC.notice() + "í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ëŠ” ì„¤ì •ë¼ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.", player.id, "orange", 5, 0);
			}
			else NC.acess(player);
			return false;
		}
		this.releasePassword = function(player){			// !clear_pw				|	ë¹„ë²ˆ í•´ì œ
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				if(!AMN.password){
					NC.announce(NC.notice() + "ë¹„ë°€ë²ˆí˜¸ê°€ ì´ë¯¸ í•´ì œë˜ì–´ ìˆìŠµë‹ˆë‹¤.", player.id, "orange", 5, 0);
					SYS.log(true, '[' + player.id + ']' + player.name + "(ì´)ê°€ ë¹„ë°€ë²ˆí˜¸ í•´ì œë¥¼ ì‹œë„í•¨.");
				}
				else{
					AMN.updatePassword();
					NC.announce(NC.unlocked() + "ë¹„ë°€ë²ˆí˜¸ê°€ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.", null, "pink", 4, 1);
					SYS.log(true, '[' + player.id + ']' + player.name + "(ì´)ê°€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í•´ì œí•¨.");
				}
			}
			else NC.acess(player);
			return false;
		}
		this.filterPlayer = function(player){				//								ì‚¬ì¹­ ë° ì¤‘ë³µ í•„í„°(onlyadmin)
			PS.members = room.getPlayerList();
			if(PS.cntPlayers <= 1) return false;
			for (let i = 1; i <= PS.cntPlayers; i++){
				if(PS.members[i].id != player.id){
					if(PS.members[i].name == player.name)			// ì‚¬ì¹­
						return AMN.doKick(player.id, "ì‚¬ì¹­ ë° ë‹¤ì¤‘ ì ‘ì†ì´ ê°ì§€ë˜ì–´ í‡´ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
																	// ë‹¤ì¤‘ ì ‘ì†
					if(PS.getAddress(PS.members[i].id) == PS.getAddress(player.id)){
						SYS.log(true, 
							'(' + PS.members[i].id  + ')' + PS.members[i].name + "(ì™€)ê³¼ " 
							+ '(' + player.id + ')' + player.name + "(ì´)ì˜ ë‹¤ì¤‘ ì ‘ì†ì´ ê°ì§€ë¨.");
						if(AMN.checkBlacklists(player.name)) return AMN.doKick(player.id, "ì‚¬ì¹­ ë° ë‹¤ì¤‘ ì ‘ì†ì´ ê°ì§€ë˜ì–´ í‡´ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.", false);
						NC.announce(NC.cnot() + "ë‹¤ì¤‘ ì ‘ì†ì´ ì˜ì‹¬ë©ë‹ˆë‹¤.", player.id, "orange", 5, 2);
						PS.blacklist.push(player.name);
						return AMN.checkBlacklists(player.name);
					}
				}
			}
			// ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê°ì§€
			return AMN.checkBlacklists(player.name);
		}
		this.checkBlacklists = function(player){			//								ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê°ì§€
			let i = 0;
			PS.members = room.getPlayerList();

			while(i < PS.blacklist.length){						// ë¸”ë™ë¦¬ìŠ¤íŠ¸ì¼ ê²½ìš°
				// í¬í•¨ë˜ë©´ í•„í„° ë°˜í™˜ | í¬í•¨ë˜ì§€ ì•Šìœ¼ë©´ i ì¦ê°€
				if(player.search(PS.blacklist[i]) != -1) return true;
				else i++;
			}
			return false;
		}
		this.doKick = function(kickedPlayer, msg, ban){			//								ê°•ì œ í‡´ì¥ ì²˜ë¦¬
			AMN.kicked = true;
			room.kickPlayer(kickedPlayer, NC.cnot() + msg, ban);
			return false;
		}
		this.getMute = function(player, msg){			// !mute ID					|	ì±„íŒ… ê¸ˆì§€(onlyadmin)
			PS.members = room.getPlayerList();
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				if(PS.cntPlayers > 1){
					if(!(PS.mutedPlayers.includes(PS.members[msg.substr(6)].name))){
						if((msg.substr(6) > 0) && (msg.substr(6) <= PS.cntPlayers)){
							if(PS.members[msg.substr(6)] && msg.substr(6) <= PS.cntPlayers){    
								// ìê¸° ìì‹ ì„ ì…ë ¥í•œ ê²½ìš°
								if(PS.members[msg.substr(6)].id == player.id) return NC.announce(NC.cnot() + "ìê¸° ìì‹ ì˜ ì±„íŒ…ì„ ê¸ˆì§€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", player.id, "orange", 5, 3)
								else {
									PS.mutedPlayers.push(PS.members[msg.substr(6)].id);
									NC.announce(NC.locked() + "íŠ¹ì • í”Œë ˆì´ì–´ì˜ ì±„íŒ…ì´ ê¸ˆì§€ë˜ì—ˆìŠµë‹ˆë‹¤.", null, "green", 5, 3);
									NC.announce(NC.locked() + "ì±„íŒ… ê¸ˆì§€ë˜ì—ˆìŠµë‹ˆë‹¤.", PS.members[msg.substr(6)].id, "green", 5, 3);
									SYS.log(true, PS.members[msg.substr(6)].name + "(ì´)ì˜ ì±„íŒ…ì´ ê¸ˆì§€ë¨.");
								}
							}
							else return NC.announce(NC.cnot() + "ì˜ëª»ëœ ëŒ€ìƒì…ë‹ˆë‹¤.", player.id, "orange", 4, 3);
						}
						else return NC.announce(NC.cnot() + "ì˜ëª»ëœ ëŒ€ìƒì…ë‹ˆë‹¤. 1ë¶€í„° " + PS.cntPlayers + "ê¹Œì§€ ì‚¬ì´ì˜ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.", player.id, "orange", 5, 3);
					}
					else return NC.announce(NC.cnot() + "ì´ë¯¸ ê¸ˆì§€ë˜ì–´ ìˆìŠµë‹ˆë‹¤.", player.id, "orange", 5, 3);
				}
				else return NC.announce(NC.locked() + "ë™ì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", player.id, "orange", 5, 3);
			}
			else return NC.acess(player);
			return false;  // ëª…ë ¹ì–´ í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ
		} 
		this.releaseMute = function(player, msg)		// !unmute ID			|	ì±„íŒ… í—ˆìš©(onlyadmin)
		{
			if (player.admin || AMN.subAdmin[player.id - 1] == true){
				PS.mutedPlayers.splice(PS.mutedPlayers.indexOf(msg.substr(9)), 1);
				NC.announce(NC.locked() + 'íŠ¹ì • í”Œë ˆì´ì–´ì˜ ì±„íŒ…ì´ í—ˆìš©ë˜ì—ˆìŠµë‹ˆë‹¤.', null, "green", 5, 3);
				SYS.log(true, player.name + '(ì´)ê°€ ëª¨ë“  ì±„ê¸ˆì„ í•´ì œí•¨.');
				return false;
			}
			else return NC.acess(player);
		}
		this.putPause = function(player){				// p						|	ì¼ì‹œ ì •ì§€(onlyadmin)
			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				room.pauseGame(true);
				return false;  
			}
		}
		this.unPause = function(player){ 				// !p						|	ê³„ì†(onlyadmin)
			if(player.admin || AMN.subAdmin[player.id - 1] == true) room.pauseGame(false);
			else NC.acess(player);
			return false;
		}
	}
}
//-----------------------------------------------------------------------
// ê³µì§€ ë° ì•Œë¦¼ í´ë˜ìŠ¤
//-----------------------------------------------------------------------
class Notice {														
	constructor() {
		this.devCheck = function(player){										// ê°œë°œ ë²„ì „ ì•ˆë‚´ ë©”ì„¸ì§€
			if(dev) return NC.announce(NC.cnot() + "ê°œë°œ ì „ìš© í…ŒìŠ¤íŠ¸ë°©ì´ë¯€ë¡œ ì›í™œí•œ í”Œë ˆì´ê°€ ì–´ë µìŠµë‹ˆë‹¤.", player.id, "orange", 5, 2);
		}	
		this.info = function () {												// ìƒì„¸ ì •ë³´
			return "ğŸ“¡ìƒì„¸ì •ë³´ğŸ“¡ : ";
		};
		this.help = function () {												// ë„ì›€ë§
			return "ğŸ’¬ë„ì›€ë§ğŸ—¨ : ";
		};
		this.infoplayer = function () {											// í”Œë ˆì´ì–´ ì •ë³´
			return "ğŸ”í”Œë ˆì´ì–´ ì •ë³´ğŸ” : ";
		};
		this.notice = function () {												// ì•Œë¦¼
			return "ğŸ›ì•Œë¦¼ğŸ› : ";
		};
		this.cnot = function () {												// ì£¼ì˜
			return "â›”ì£¼ì˜â›” : ";
		};
		this.locked = function () {												// ë¹„í™œì„±í™”
			return "ğŸ”’ì ê¸ˆğŸ”’ : ";
		};
		this.unlocked = function () {											// í™œì„±í™”
			return "ğŸ”“í•´ì œğŸ”“ : ";
		};
		this.acess = function(player){											// ê¶Œí•œ ì—†ìŒ
		NC.announce(NC.locked() + 'ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.', player.id, "yellow", 5, 3);
		return false;
		}
		this.msgCommand = function(msg){ 										// ì•Œë¦¼ ë©”ì„¸ì§€
			msg = "ğŸ”" + msg + "ëª…ë ¹ì–´ğŸ” : ";
			return msg;
		}
		this.alretMsg = function(player, kind){									// ìš•ì„¤ ê°ì§€ ë©”ì‹œì§€
			let id = Math.floor(Math.random() * 10);
			var msg;
			switch(id){
				case 0: msg = "ìš•í•˜ì§€ ë§™ì‹œë‹¤."; break;
				case 1: msg = "ê±´ì „í•œ ì¸í„°ë„· ë¬¸í™”ë¥¼ ë§Œë“¤ì–´ ê°‘ì‹œë‹¤."; break;
				case 2: msg = "í•œ ë²ˆì¯¤ì€ ê±°ìš¸ì— ë¹„ì¹œ ìì‹ ì˜ ëª¨ìŠµì„ ë³´ì„¸ìš”."; break;
				case 3: msg = "ê°€ëŠ” ë§ì´ ê³ ì™€ì•¼ ì˜¤ëŠ” ë§ë„ ê³±ë‹¤."; break;
				case 4: msg = "ì—­ì§€ì‚¬ì§€ì˜ íƒœë„ë¡œ ë‚¨ì„ ìƒê°í•©ì‹œë‹¤."; break;
				case 5: msg = "ë°”ê¹¥ ì‚¬ëŒë“¤, ì§€ì¸, ì¹œêµ¬, ê°€ì¡±ë“¤ê¹Œì§€ë„ ê·¸ë ‡ê²Œ í•˜ì‹¤ ê±´ê°€ìš”?"; break;
				case 6: msg = "ì§€ê¸ˆ ë³¸ì¸ì˜ ëª¨ìŠµì„ ë³´ì„¸ìš”. í‚¤ë³´ë“œ ë‘ë“œë¦¬ë©´ì„œ ë¬´ì–¼ í•˜ê³  ìˆëŠ”ì§€."; break;
				case 7: msg = "ì ì–´ë„ ê°€ì •êµìœ¡ì€ ë…í•™í•˜ì§€ ì•Šì€ ê±¸ë¡œ ì•Œì•„ë‘ëŠ” ê²Œ ì¢‹ê² ì£ ."; break;
				case 8: msg = "ìš°ë¦¬ í•œ ë²ˆ ì˜¬ë°”ë¥´ê³  ê±´ì „í•œ ì–¸ì–´ ì‚¬ìš© ìì„¸ë¥¼ ê°€ì§‘ì‹œë‹¤."; break;
				case 9: msg = "ë„ì €íˆ ì“¸ ë©˜íŠ¸ê°€ ì—†ë„¤ìš”. êµ³ì´ ë§ ì•ˆ í•´ë„ ì•Œê² ì£ ?"; break;
				case 10: msg = "í•œ ë²ˆ ë‚´ë±‰ì€ ë§ì€ ë„ë¡œ ì£¼ì›Œë‹´ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."; break;
			}
			NC.announce(NC.cnot() + msg, player.id, "orange", 5, 2);
			return false;
		}
		this.ruleCommand = function(msg){ 										// ê·œì¹™
			msg = "ğŸ•¹" + msg + "ê·œì¹™ğŸ® : ";
			return msg;
		}
		this.announce = function(msg, target, color, style, sound){ 			// ì•Œë¦¼ ë©”ì‹œì§€
			room.sendAnnouncement(msg, target, NC.getColor(color), NC.getStyle(style), sound);
			return false;
		}
		this.getColor = function(color){
			switch(color){
				case 0: color = "E81224"; break;
				case 1: color = "0078D7"; break;
				case "um": color = "6CB858"; break;				// UM
				case "red": color = "FF0000"; break;			// ë¹¨ê°•
				case "orange": color = "FF5E00"; break;			// ì£¼í™©
				case "yellow": color = "FFE400"; break;			// ë…¸ë‘
				case "green": color = "8ED2AB"; break;			// ì´ˆë¡
				case "sky": color = "00D8FF"; break;			// í•˜ëŠ˜
				case "blue": color = "0000FF"; break;			// íŒŒë‘
				case "purple": color = "5F00FF"; break;			// ë³´ë¼
				case "pink": color = "ff86cf"; break;			// í•‘í¬
				case "black": color = "000000"; break;			// ê²€ì •
			}
			if(color) color = ("0x" + color);
			else color = "0xFFFFFF";
			return color;
		}
		this.getStyle = function(style){
			switch(style){
				case 1: style = "nomarl"; break;		// ê¸°ë³¸
				case 2: style = "bold"; break;			// ë³¼ë“œì²´
				case 3: style = "italic"; break;		// ì´íƒˆë¦­
				case 4: style = "small"; break;			// ì‘ê²Œ
				case 5: style = "small-bold"; break;	// ì‘ì€ ë³¼ë“œì²´
				case 6: style = "small-italic"; break;	// ì‘ì€ ì´íƒˆë¦­
			}
			return style;
		}
	}
}
//-----------------------------------------------------------------------
// ì±„íŒ… ì‹œìŠ¤í…œ í´ë˜ìŠ¤
//-----------------------------------------------------------------------
class ChatSystem {													
	constructor(){
		this.face = [													//	 						ì´ëª¨í‹°ì½˜
			'ğŸ¤”', 
			'ğŸ˜›', 'ğŸ˜', 'ğŸ˜…', 'ğŸ˜‚', 'ğŸ¤£', 
			'ğŸ˜', 'ğŸ˜', 'ğŸ˜¥', 'ğŸ˜°', 'ğŸ™„', 
			'ğŸ˜´', 'ğŸ¥¶', 'ğŸ˜±', 'ğŸ¥µ'
		]
		this.ffWords = [												// 							ìš•ì„¤ í•„í„°ë§ ë‹¨ì–´
			"ã„´ã…‡ã…","ã„´ã„±ã…", "ã„´.ã„±ã…","ã„´.ã…‡ã…","ã„´ã„±.ã…","ã„´ã…‡.ã…",
			"ë‹ˆì—„ë§ˆ","ëŠê¸ˆ","ë‹ˆì• ë¯¸","ë‹ˆì• 1ë¯¸","ë‹ˆì• 2ë¯¸", "ë‹ˆë¯¸", "ë‹ˆì•°", "ë‹ˆì• ë¹„", "ì• ë¯¸ì—†ëŠ”", "ì• ë¯¸ì—†ì§€", "ì• ë¯¸ì—†ëƒ", "sldjaak", "smrma", "sldlao",
			"ì• 1ë¯¸","ì• 2ë¯¸","ì• ë¯¸ë’¤ì§","ì• 1ë¯¸ë’¤ì§","ì• 2ë¯¸ë’¤ì§", "ì°½ë…€", "ì°½ë…„", "ì—…ì†Œë…€", "doalenlwla", "ckdsu",
			"ì• ë¯¸ ë’¤ì§", "ì• ë¯¸ ë””ì§", "ì• ë¯¸ ë’¤ì¡Œëƒ", "ì• ë¯¸ë’¤ì¡Œë„¤","ì• 1ë¯¸ë’¤ì¡Œë„¤","ì• 2ë¯¸ë’¤ì¡Œë„¤","ì• ë¯¸ë’¤ì¡Œë‹¤","ì• 1ë¯¸ë’¤ì¡Œë‹¤","ì• 2ë¯¸ë’¤ì¡Œë‹¤",
			"ì• ë¯¸ ë’¤ì¡Œë„¤","ì• 1ë¯¸ ë’¤ì¡Œë„¤","ì• 2ë¯¸ ë’¤ì¡Œë„¤","ì• ë¯¸ ë’¤ì¡Œë‹¤","ì• 1ë¯¸ ë’¤ì¡Œë‹¤","ì• 2ë¯¸ ë’¤ì¡Œë‹¤", "ë³´ì§€ë…„",
		]
		this.fWords = [													// 							ìš•ì„¤ í•„í„°ë§ ë‹¨ì–´
			"ã……ã…‚", "ã…†ã…‚", "ã…†ã…ƒ", "tq", "Tq",
			"ã…‚ã……", "ã…„", "qt", "ã…‚ ã……",
			"ì¥ì• ì¸ì•„", "wkddodlsdk",
			"ã„²ã…ˆ", "Rw", "êº¼ì ¸",
			"ã…ˆã„¹", "ã„·ã…Š", "ã…ˆã„´", "ã…ˆã„²", "ã…—", "ğŸ–•ğŸ»", "ğŸ–•", "ğŸ–•ğŸ½", "ğŸ–•ğŸ¾", "ğŸ–•ğŸ¿",
			"ìƒˆë¼", "ìƒˆêº„", "ìƒˆë‚€", "toRl","ì‹œë°œ", "ì‹œ1ë°œ", "ì‹œ2ë°œ", "tlqkf",
			"ì”¨ë°œ", "ì”¨ë°”", "ì”¨-ë°œ","ì”¨ã…¡ë°œ","ì”¨ì´ë°œ","ì”¨ì´ì´ë°œ","ì”¨ì´ì´ì´ë°œ","ì”¨1ë°œ","ì”¨2ë°œ", "Tlqkf", "Tlqk",
			"ë³‘ì‹ ","ë³‘1ì‹ ","ë³‘2ì‹ ", "qudtls","ë¸…ì‹ ","ë¸…1ì‹ ","ë¸…2ì‹ ", "qbdtls",
			"ì§€ë„","ì§€1ë„","ì§€2ë„", "wlfkf", "wf", "wlfkd",
			"ì¢†", "whw","ì¡´ë‚˜","ì¡´1ë‚˜","ì¡´2ë‚˜", "whssk", "ì –ë°¥ì‰‘", "ã…ˆë°¥", "wjwqkqtnpr", "wqkq",
			"ì”¹", "tlq",
			"ê°œìƒˆ1ë¼", "ê°œìƒˆ2ë¼", "ê°œìƒˆ1êº„", "ê°œìƒˆ2êº„","ê°œìƒˆ1ë¼ì•¼", "ê°œìƒˆ2ë¼ì•¼", "ê°œìƒˆ1ë¼ê°€", "ê°œìƒˆ2ë¼ê°€",
			"ë‹¥ì³", "ë‹¥ì¹˜"
		]
		this.getFace = function(emoji, name){ return (emoji + name + emoji) }
		this.getSpace = function(string){								//							ê³µë°± í™•ì¸
			for(let i = 0; i < string.length; i++)
				if((string.substr(i, 1)).search(" ") == -1) return false;	// ê³µë°± ì™¸ ë‹¤ë¥¸ ë¬¸ìê°€ ë“¤ì–´ìˆìœ¼ë©´ ê±°ì§“ìœ¼ë¡œ ë°˜í™˜
			return true;
		}
		this.onPlayerChat = function(player, msg) {						//							ì±„íŒ… ì‹œìŠ¤í…œ
			let i = 0;
			let spacePos = msg.search(" ");
			let command = msg.substr(0, spacePos !== -1 ? spacePos : msg.length);
			
			// 1ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ëª¨ë“  í‡´ì¥ ëª©ë¡ ì´ˆê¸°í™”
			if(TM.temp == 0) TM.temp = 1;
			if(date.getMinutes < TM.temp){ 
				AMN.getClearBans();
				TM.temp = date.getMinutes();
			}

			if (commands.hasOwnProperty(command)) return commands[command](player, msg);	//	ëª…ë ¹ì–´
			else{ 
				if(PS.mutedPlayers.includes(player.id)){		// ì…ë§‰ìŒ ê¸°ëŠ¥
					let i = Math.floor(Math.random() * 5);
					let msg;
					switch(i){
						case 0: msg = "ì ì‹œë™ì•ˆ ì±„íŒ…ì´ ë¶ˆê°€í•©ë‹ˆë‹¤."; 	break;
						case 1: msg = "ì±„íŒ…ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤."; 		 	break;
						case 2: msg = "ë‹¹ë¶„ê°„ ì±„íŒ…ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.";		break;
						case 3: msg = "ì±„íŒ…ì„ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."; 	break;
						case 4: msg = "ì±„íŒ…ì´ ê¸ˆì§€ë˜ì—ˆìŠµë‹ˆë‹¤."; 		break;
					}
					return NC.announce(NC.locked() + msg, player.id, "green", 5, 3);
				}
				CS.send(player, msg, true);												//	ì¼ë°˜ ì±„íŒ…
			return false;
			}
		}
		this.filterWords = function(player, msg){						//							ìš•ì„¤ í•„í„°ë§
			let i = 0;
			while(i < CS.ffWords.length){			// ê°•ì œ í‡´ì¥
				// í¬í•¨ë˜ë©´ í•„í„° ë°˜í™˜ | í¬í•¨ë˜ì§€ ì•Šìœ¼ë©´ i ì¦ê°€
				if(msg.search(CS.ffWords[i]) !== -1) 
					return AMN.doKick(player.id, "ìš•ì„¤(" + CS.ffWords[i] + ')');
				else i++; 
			}
			i = 0;
			while(i < CS.fWords.length){				// ê²½ê³  ë° ì£¼ì˜
				// í¬í•¨ë˜ë©´ í•„í„° ë°˜í™˜ | í¬í•¨ë˜ì§€ ì•Šìœ¼ë©´ i ì¦ê°€
				if(msg.search(CS.fWords[i]) !== -1){ 
					let id = (PS.cntPlayers < 10) ? PS.playersid[player.id] : SYS.setLine(PS.playersid[player.id], 2);
					CS.alltoChat(player, "ì „ì²´ (" + id + ")ğŸš«" + player.name + ": " + msg);
					CS.showMsg("ì „ì²´ (" + id + ")" + PS.checkMarks(player) + player.name + ": " + msg, player.id);
					SYS.log(true, "ì „ì²´ " + player.id + '(' + id + ")ğŸš«" + player.name + ": " + msg);
					return NC.alretMsg(player);
				}
				else i++; 
			}
			return true;
		}
		this.send = function(player, msg, chatPublic){					//							ì¼ë°˜ ì±„íŒ…
			let fmsg = (PS.cntPlayers >= 10) ? "ì „ì²´ (" + SYS.setLine(PS.playersid[player.id], 2) + ')' : "ì „ì²´ (" + PS.playersid[player.id] + ')';
			let lmsg = (player.name + ": " + msg);
			for (let i = 1; i <= PS.cntPlayers; i++){
				if((PS.members[i].id != player.id)&&(PS.getAddress(PS.members[i].id) == PS.getAddress(player.id)))
					NC.announce(NC.cnot() + "ë‹¤ì¤‘ ì ‘ì†ì´ ì˜ì‹¬ë©ë‹ˆë‹¤.", player.id, "orange", 5, 2);
			}
			// ìš•ì„¤ í•„í„°ë§
			if(CS.filterWords(player, msg)){
				if(chatPublic) PS.getMarks(true, player, fmsg, lmsg);
				else PS.getMarks(false, player, fmsg, lmsg);
			}
			return false;
		}
		this.alltoChat = function(player, msg, type){					//							ë‚˜ ë¹¼ê³  ë‹¤ ë³´ë‚´ê¸°
			PS.members = room.getPlayerList();
			for(var i = 1; i<= PS.cntPlayers; i++){
				if(PS.playersid[PS.members[i].id] != PS.playersid[player.id]){
					if(type) NC.announce(msg, PS.members[i].id, "yellow", 5, 1);	// ê³µì§€ë¡œ ì¶œë ¥
					else CS.showMsg(msg, PS.members[i].id);					// ì¼ë°˜ ì±„íŒ…ìœ¼ë¡œ ì¶œë ¥
				}
			}
			return false;
		}
		this.whisperChat = function(player, msg){						// !e ID				|	ê·“ì†ë§ ëª…ë ¹ì–´
			PS.members = room.getPlayerList();
			if(PS.mutedPlayers.includes(player.id)){		// ì…ë§‰ìŒ ê¸°ëŠ¥
				let i = Math.floor(Math.random() * 5);
				let msg;
				switch(i){
					case 0: msg = "ì ì‹œë™ì•ˆ ì±„íŒ…ì´ ë¶ˆê°€í•©ë‹ˆë‹¤."; 	break;
					case 1: msg = "ì±„íŒ…ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤."; 		 	break;
					case 2: msg = "ë‹¹ë¶„ê°„ ì±„íŒ…ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.";		break;
					case 3: msg = "ì±„íŒ…ì„ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."; 	break;
					case 4: msg = "ì±„íŒ…ì´ ê¸ˆì§€ë˜ì—ˆìŠµë‹ˆë‹¤."; 		break;
				}
				return NC.announce(NC.locked() + msg, player.id, "green", 5, 3);
			}
			for(let i = 0; i <= PS.cntPlayers; i++){
				let pId = PS.cntPlayers >= 10 ? SYS.setLine(PS.playersid[player.id], 2) : PS.playersid[player.id];
				let tId = PS.cntPlayers >= 10 ? SYS.setLine(PS.playersid[PS.members[i].id], 2) : PS.playersid[PS.members[i].id];
				if(PS.members[i] && (i == msg.substr(3, 2))){
					if(PS.members[i].id == player.id) 		// ë™ì¼ ì¸ë¬¼ì¸ ê²½ìš°
					NC.announce(NC.cnot() + "ìê¸° ìì‹ ì—ê²Œ ê·“ì†ë§ì„ ë³´ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", player.id, "orange", 3, 3);
					else if(!PS.members[i].id){				// idê°€ 0ì´ë©´ ì½˜ì†”ì°½ìœ¼ë¡œ ì „ë‹¬
						CS.showMsg("ì™¸ë¶€ (" + pId + ')' + PS.checkMarks(player) + player.name + "â†’ (0)ğŸŒì„œë²„ ë§¤ë‹ˆì €: " + msg.substr(5, 50), player.id);
						SYS.log(false, player.id + '(' + pId + ')' + player.name + ": " +  msg.substr(5, 50));
					}
					else{
						CS.showMsg("ê°œì¸ (" + pId + ')' + PS.checkMarks(player) + player.name + "â†’ (" + tId + ')' + PS.checkMarks(PS.members[i]) + PS.members[i].name + ": " + msg.substr(5, 50), player.id);
						CS.showMsg("ê°œì¸ (" + pId + ')' + PS.checkMarks(player) + player.name + "â†’ (" + tId + ')' + PS.checkMarks(PS.members[i]) + PS.members[i].name + ": " +  msg.substr(5, 50) + " (ë‹µì¥:  !e " + PS.playersid[player.id] + " ë‹µí•  ë‚´ìš©)", PS.members[i].id);
						SYS.log(true, "ê°œì¸ " + player.id + '(' + pId + ')' + PS.checkMarks(player) + player.name + "â†’ (" + tId + ')' + PS.checkMarks(PS.members[i]) + PS.members[i].name + ": " + msg.substr(5, 50));
					}
				}
			}
			// ê·“ì†ë§ ì²˜ë¦¬
			return false;
		}
		this.teamChat = function(player, msg){							// !t 					|	íŒ€ ì±„íŒ… ëª…ë ¹ì–´
			PS.members = room.getPlayerList();
			var toTeam;
			if(PS.mutedPlayers.includes(player.id)){		// ì…ë§‰ìŒ ê¸°ëŠ¥
				let i = Math.floor(Math.random() * 5);
				let msg;
				switch(i){
					case 0: msg = "ì ì‹œë™ì•ˆ ì±„íŒ…ì´ ë¶ˆê°€í•©ë‹ˆë‹¤."; 	break;
					case 1: msg = "ì±„íŒ…ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤."; 		 	break;
					case 2: msg = "ë‹¹ë¶„ê°„ ì±„íŒ…ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.";		break;
					case 3: msg = "ì±„íŒ…ì„ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."; 	break;
					case 4: msg = "ì±„íŒ…ì´ ê¸ˆì§€ë˜ì—ˆìŠµë‹ˆë‹¤."; 		break;
				}
				return NC.announce(NC.locked() + msg, player.id, "green", 5, 3);
			}
			switch(player.team){
				case 0: toTeam = "ê´€ì¤‘"; break;
				case 1: toTeam = "ë ˆë“œ"; break;
				case 2: toTeam = "ë¸”ë£¨"; break;
			}
			CS.showMsg(toTeam + " (" + PS.playersid[player.id] + ")" + PS.checkMarks(player, true) + player.name + ": " + msg.substr(3, 50), player.id);
			SYS.log(true, toTeam + " (" + PS.playersid[player.id] + ")" + PS.checkMarks(player) + player.name + ": " + msg.substr(3, 50));
			
			for(let i = 1; i <= PS.cntPlayers; i++){
				// í”Œë ˆì´ì–´ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ íŒ€ì› ì°¾ê¸°
				if(PS.playersid[PS.members[i].id] != PS.playersid[player.id]){
					if(PS.getTeamofPlayer(PS.members[i]) == player.team)
					CS.showMsg(toTeam + " (" + PS.playersid[player.id] + ")" + PS.checkMarks(player, true) + player.name + ": " +  msg.substr(3, 50) + " (íŒ€ ì±„íŒ…: !t ë‹µí•  ë‚´ìš©)", PS.members[i].id);
				}
			}
			return false;
		}
		this.allChat = function(player, msg){							// !a 					|	ì „ì²´ ì±„íŒ… ëª…ë ¹ì–´
			let senseFilter = msg.search('!a');
			var i = 0;
			
			if(senseFilter != -1) i = 3;	
			CS.showMsg("ì „ì²´ (" + PS.playersid[player.id] + ")" + PS.checkMarks(player) + player.name + ": " + msg.substr(i, 50));
			return false;
		}
		this.showMsg = function(msg, target){ 							// 							ì¼ë°˜ ë©”ì‹œì§€ ì¶œë ¥
			NOPLAYER == false ? room.sendChat(msg, target) : NC.announce(msg, target, null, 1, 1);
			return false;
		}
	}
}
//-----------------------------------------------------------------------
// ëª…ë ¹ì–´ í´ë˜ìŠ¤
//-----------------------------------------------------------------------
class Commands{														
	constructor(){
		this.plaster = function(player){										// !ë„			|	ë„ì›€ë§, ë„ë°°ë°©ì§€ë¬¸ì(onlyadmin)
    		if (player.admin || AMN.subAdmin[player.id - 1] == true){ 
				NC.announce("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€", null, "orange", 2, 2);
				NC.announce(NC.cnot() + "ë„ë°° ë°©ì§€", null, "orange", 2, 2);
				NC.announce(NC.cnot() + "ë¶„ë€ ë°©ì§€", null, "orange", 2, 2);
				NC.announce(NC.cnot() + "ì •ìˆ™ ìœ ì§€", null, "orange", 2, 2);
				NC.announce(NC.cnot() + "ì§ˆì„œ ìœ ì§€", null, "orange", 2, 2);
				NC.announce("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€", null, "orange", 2, 2);
				SYS.log(true, player.name + "(ì´)ê°€ ë„ë°° ë°©ì§€ ë¬¸ìë¥¼ ì¶œë ¥í•¨.");
				
			}
			else CM.comHelp(player, '!ë„');	// ë„ì›€ë§
			return false; 						// ëª…ë ¹ì–´ í”ì ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ
		}
		this.comHelp = function(player, msg){ 									// !help		|	ëª…ë ¹ì–´ ë„ì›€ë§
			PS.members = room.getPlayerList();
			CS.send(player, msg, true);
			for(var i = 1; i <= PS.cntPlayers; i++){
				if(PS.members[i].admin == true || AMN.subAdmin[player.id - 1] == true){
					NC.announce(NC.msgCommand("ì¼ë°˜ ") 
					+ "!adminhelp(ë°© ê´€ë¦¬) | !bothelp(ë´‡ë°©) | !maphelp(ë§µ) | !joinhelp(íˆ¬ì…) | !chathelp(ì±„íŒ…) | !etchelp(ê¸°íƒ€)", PS.members[i].id, null, 4, 3);
				}
				else{
					NC.announce(NC.msgCommand("ì¼ë°˜ ") 
					+ "!bothelp(ë´‡ë°©) | !maphelp(ë§µ) | !joinhelp(íˆ¬ì…) | !chathelp(ì±„íŒ…) | !etchelp(ê¸°íƒ€)", PS.members[i].id, null, 4, 3);
				}
			}
			return false;
		}
		this.botHelp = function(player, msg){									// !bothelp		|	ë´‡ë°© ë„ì›€ë§
			PS.members = room.getPlayerList();
			CS.send(player, msg, true);
			for(var i = 1; i <= PS.cntPlayers; i++){
				if(PS.members[i].admin == true || AMN.subAdmin[player.id - 1] == true){
					NC.announce(NC.msgCommand("ë´‡ë°© ") 
					+ "!about(ë´‡ë°© ì •ë³´) | !host(í˜¸ìŠ¤íŠ¸ ì´ë™) | !set_pw(ë¹„ë²ˆ ì„¤ì •) | !clear_pw(ë¹„ë²ˆ í•´ì œ) | !show_pw(ë¹„ë²ˆ í‘œì‹œ) | !ë„(ë„ë°° ë°©ì§€ ë¬¸ì)", PS.members[i].id, null, 4, 3);
				}
				else{
					NC.announce(NC.msgCommand("ë´‡ë°© ") 
					+ "!about(ë´‡ë°© ì •ë³´)", PS.members[i].id, null, 4, 3);
				}
			}
			return false;
		}
		this.chatHelp = function(player, msg){									// !chathelp	|	ì±„íŒ… ë„ì›€ë§
			PS.members = room.getPlayerList();
			CS.send(player, msg, true);
			for(var i = 1; i <= PS.cntPlayers; i++){
				if(PS.members[i].admin == true || AMN.subAdmin[player.id - 1] == true){
					NC.announce(NC.msgCommand("ì±„íŒ… ") 
					+ "!e ID(ê·“ì†ë§) | !t(íŒ€ë³„ ì±„íŒ…) | !a(ì „ì²´ ì±„íŒ…) | ?mark(ì±„íŒ…ì°½ ë§ˆí¬) | !ë„(ë„ë°° ë°©ì§€ ë¬¸ì)", PS.members[i].id, null, 4, 3);
				}
				else{
					NC.announce(NC.msgCommand("ì±„íŒ… ") 
					+ "!e ID(ê·“ì†ë§) | !t(íŒ€ë³„ ì±„íŒ…) | !a(ì „ì²´ ì±„íŒ…) | ?mark(ì±„íŒ…ì°½ ë§ˆí¬)", PS.members[i].id, null, 4, 3);
				}
			}
			return false;
		}
		this.mapHelp = function(player, msg){									// !maphelp		|	ë§µ ë„ì›€ë§
			PS.members = room.getPlayerList();
			CS.send(player, msg, true);
			for(var i = 1; i <= PS.cntPlayers; i++){
				if(PS.members[i].admin == true || AMN.subAdmin[player.id - 1] == true){
					NC.announce(NC.msgCommand("ë§µ ") 
					+ "/checksum(ë§µ ì •ë³´ í™•ì¸) | /store(ë§µ ì €ì¥) | !maplist(ë‚´ì¥ ë§µ ëª©ë¡) | !load ID(ë‚´ì¥ ë§µ ë¶ˆëŸ¬ì˜¤ê¸°) | !lock_map(ë§µ ê³ ì •)", PS.members[i].id, null, 4, 3);
				}
				else{
					NC.announce(NC.msgCommand('ë§µ ') 
					+ "/checksum(ë§µ ì •ë³´ í™•ì¸) | /store(ë§µ ì €ì¥) | !maplist(ë‚´ì¥ ë§µ ëª©ë¡)", PS.members[i].id, null, 4, 3);
				}
			}
			return false;
		}
		this.etcHelp = function(player, msg){									// !etchelp		|	ê¸°íƒ€ ë„ì›€ë§
			PS.members = room.getPlayerList();
			CS.send(player, msg, true);
			for(var i = 1; i <= PS.cntPlayers; i++){
				if(PS.members[i].admin == true || AMN.subAdmin[player.id - 1] == true){
					NC.announce(NC.msgCommand("ê¸°íƒ€ ") 
					+ "!avatar(ë“±ë²ˆí˜¸ ë³€ê²½) | !gkhelp(ê³¨í‚¤í¼ ë„ì›€ë§) | !adminhelp(ê´€ë¦¬ ë„ì›€ë§)", PS.members[i].id, null, 4, 3);
				}
				else{
					NC.announce(NC.msgCommand("ê¸°íƒ€ ") 
					+ "!avatar(ë“±ë²ˆí˜¸ ë³€ê²½) | !gkhelp(ê³¨í‚¤í¼ ë„ì›€ë§)", PS.members[i].id, null, 4, 3);
				}
			}
			return false;
		}
		this.qMark = function(){												// ?mark		| 	ì§ˆë¬¸_ì±„íŒ… ë§ˆí¬
			NC.announce(NC.info()
				+ "ğŸŒ" + ": ì„œë²„ ë§¤ë‹ˆì € | "
				+ PS.mark[0] + ": ê´€ë¦¬ì |"
				+ PS.mark[1] + ": ë³´ì¡° ê´€ë¦¬ì |"
				+ PS.mark[2] + ": ì¼ë°˜ |"
				+ PS.mark[3] + ": ë¸”ë™ë¦¬ìŠ¤íŠ¸ "
				+ CM.recommendCom("ê´€ë ¨ ", "!chathelp"),
					null, null, 4, 3);
			return false;
		}
		this.recommendCom = function(kind, commands){							// 					ì¶”ì²œ ë„ì›€ë§
			return ('(' + kind + " ë„ì›€ë§: " + commands + ')'); 
		}
		this.helpJoinP = function(player){ 										// !join		|  	ì°¸ê°€ ë„ì›€ë§
			NC.announce(NC.msgCommand("íˆ¬ì… ") + 
			"ë ˆë“œíŒ€: !red | ê´€ì „ì„: !spec | ë¸”ë£¨íŒ€: !blue | ì ìˆ˜: !afk", player.id, null, 4, 3);
			return false;
		}
		this.helpJoinA = function(){ 											// !join		| 	ì°¸ê°€ ë„ì›€ë§(ê³µìš©)
			NC.announce(NC.msgCommand("íˆ¬ì… ") + 
			"ë ˆë“œíŒ€: !red | ê´€ì „ì„: !spec | ë¸”ë£¨íŒ€: !blue | ì ìˆ˜: !afk", null, null, 3, 3);
			return false;
		}
		this.helpMaps = function(player, msg){ 									// !maplist		|	ë§µ ë„ì›€ë§
			CS.send(player, msg, true);
			NC.announce("ğŸ”ë§µ ì •ë ¬ ëª©ë¡ğŸ” " + CM.recommendCom("ê´€ë ¨", '!maphelp'), player.id, "yellow", 5, 3);
			for(let i = 0; i < 50; i++){
				if(mapsName[i]) NC.announce('[' + SYS.setLine(i + 1, 2) + ']' + mapsName[i], player.id, null, 5, 4);
			}
			return false;
		}
		this.infoRoom = function(player, msg){ 									// !info		| 	ë°© ì •ë³´
			CS.send(player, msg, true);
			NC.announce(NC.info() + "UM ë´‡ë°©ì…ë‹ˆë‹¤. | ë²„ì „: " + VersionRoom + " (Based on UMUX " + VersionUX + ") | ë¦´ë¦¬ìŠ¤ ë‚ ì§œ: 2019.12.08 | " + CM.recommendCom("ê´€ë ¨", "!help"), null, "green", 5, 3);
			return false;
		}
		this.setJoinPlayer = function(player, toTeam, msg){						// 					í”Œë ˆì´ì–´ íˆ¬ì…
			let team = player.team;
			let id = player.id;
			let name = player.name;
			PS.members = room.getPlayerList();

			if(player.admin || AMN.subAdmin[player.id - 1] == true){
				if(msg.substr(3, 2) && PS.members[msg.substr(3, 2)]){
					if(PS.members[msg.substr(3, 2)].id != player.id){
						team = PS.members[msg.substr(3, 2)].team;
						id = PS.members[msg.substr(3, 2)].id;
						name = PS.members[msg.substr(3, 2)].name;
					}
				}
			}
			else if(AMN.teamsLock) return NC.acess(player);		// íŒ€ ì´ë™ ê¸ˆì§€ ì²˜ë¦¬
			if(team == toTeam) NC.announce(NC.cnot() + "ì¤‘ë³µëœ ëª…ë ¹ì–´ì…ë‹ˆë‹¤.", id, "orange", 5, 1);
			else if(PS.sleepPlayars[player.id]) NC.announce(NC.cnot() + "ê²Œì„ ì°¸ì—¬ ì˜ì‚¬ê°€ ì—†ì–´ í”Œë ˆì´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. " + CM.recommendCom("ê´€ë ¨ ", "!afk"), id, "orange", 5, 1);
			else{
				switch(toTeam){  // 0: ê´€ì¤‘, 1: ë ˆë“œ, 2: ë¸”ë£¨
					case 0:	NC.announce(NC.notice() + "ê´€ì¤‘ì„ìœ¼ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤.", id, "green", 4, 0); break;
					case 1: NC.announce(NC.notice() + name + "ë‹˜ì´ ë ˆë“œíŒ€ìœ¼ë¡œ ì°¸ê°€í–ˆìŠµë‹ˆë‹¤.", null, "green", 4, 0); break;
					case 2: NC.announce(NC.notice() + name + "ë‹˜ì´ ë¸”ë£¨íŒ€ìœ¼ë¡œ ì°¸ê°€í–ˆìŠµë‹ˆë‹¤.", null, "green", 4, 0); break;
				}
				room.setPlayerTeam(id, toTeam);
			}
			return false;
		}
		this.setJoinSpec = function(player, msg){ return CM.setJoinPlayer(player, 0, msg);}		// 0: ê´€ì¤‘
		this.setJoinRed = function(player, msg){ return CM.setJoinPlayer(player, 1, msg);}		// 1: ë ˆë“œ
		this.setJoinBlue = function(player, msg){ return CM.setJoinPlayer(player, 2, msg);}		// 2: ë¸”ë£¨		
		this.setSleep = function(player){										// !afk			|	ì¥ê¸° ëŒ€ê¸° í”Œë ˆì´ì–´ ì„¤ì •
			if(!PS.sleepPlayars[player.id]) return PS.setSleep(player, true);
			return PS.setSleep(player, false);
		}
		this.loadMap = function(player, mapId){									// !load n		|	ë§µ ë¡œë“œ ëª…ë ¹ì–´(onlyadmin)
			if (player.admin || AMN.subAdmin[player.id - 1] == true){
				let mapData = (maps[mapId.substr(6, 2) - 1]);

				if((mapId.substr(6, 2)) >= 1 && ((mapId.substr(6, 2)) <= 12)){
					if((AMN.mapLock[1] == true) && (AMN.mapLock[0] != mapData)){
						NC.announce(NC.cnot() + "ê¶Œí•œì´ ì—†ì–´ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", null, "green", 5, 3);
						SYS.log(true, player.name + "(ì´)ê°€ ë§µ êµì²´ë¥¼ ì‹œë„í•¨ (ì‹¤íŒ¨).");
					}	
					else{
						room.stopGame();
						room.setCustomStadium(mapData);
						AMN.mapLock[0] = mapData;
						SYS.log(true, player.name + "(ì´)ê°€ " + mapId.substr(6, 2) + "ë²ˆ ë§µìœ¼ë¡œ êµì²´í•¨.");
					}
				}
				else{ 
					NC.announce(NC.cnot() + "ì˜¬ë°”ë¥´ì§€ ì•Šì€ IDì…ë‹ˆë‹¤." + CM.recommendCom("ê´€ë ¨ ", "!maplist"), player.id, "orange", 5, 1);
					SYS.log(true, player.name + "(ì´)ê°€ ë§µ êµì²´ë¥¼ ì‹œë„í•¨ (ì‹¤íŒ¨).");
				}
			}
			else NC.acess(player);
			return false;
		}
		this.setRecording = function(player){									// !rec			|	ë…¹í™” ì‹œì‘/ì¢…ë£Œ
			if(player.admin){
				if(GM.stateRecording) return GM.stopRecording();
				else return GM.startRecording();
			}
			else NC.acess(player);
			return false;
		}
		// ------------ì´ìŠ¤í„° ì—ê·¸------------------
		this.joke = function(player, msg){										//	!ë„ë‹´		|	joke ëª…ë ¹ì–´
			CS.send(player, msg, true);
			CS.showMsg('ì „ì²´ ' + CS.getFace(CS.face[1], "Alphago") + ": í—¤í—¤í—·, ë“¤ì¼œë²„ë ¸êµ°, eigu.");
			return false;
		}
		this.hawawa = function(player, msg){									//	ê·¸ì¹˜ë§Œ		|	í‚¹ì¹˜ë§Œ ëª…ë ¹ì–´
			CS.send(player, msg, true);
			CS.showMsg('ì „ì²´ ' + CS.getFace(CS.face[10], "Alphago") + ": ...ì´ë ‡ê²Œë¼ë„ í•˜ì§€ ì•Šìœ¼ë©´...ì§€ì¼œë´ì£¼ì§€ ì•ŠëŠ” ê±¸...");
			return false;
		}
		this.taebo = function(player, msg){										//	íƒœë³´í•´ 		|	íƒœë³´ ì‘ë‹µ
			CS.send(player, msg, true);
			CS.showMsg("ì „ì²´ " + CS.getFace(CS.face[2], "Alphago") + ": @(^0^)==@ ì ˆëŒ€ íƒœë³´í•´! @==(^0^)@");
			return false;
		}
		this.jongikannemohyung = function(player, msg){
			CS.send(player, msg, true);
			CS.showMsg("ì „ì²´ (2)" + PS.mark[0] + player.name + ": ë³¸ì¸ ë°©ê¸ˆ ë„¤ëª¨í˜• ë˜ëŠ” ìƒìƒí•¨. í•˜ì§€ë§Œ ì–´ë¦¼ë„ ì—†ì§€!");
			return false;
		}
	}
}
//-----------------------------------------------------------------------
// í”Œë ˆì´ì–´ í´ë˜ìŠ¤
//-----------------------------------------------------------------------
class Player{														
	constructor() {
		this.mark = [									// ì£¼ê¶Œí•œ, ë³´ì¡°ê¶Œí•œ, ì¼ë°˜, ë¸”ë™ë¦¬ìŠ¤íŠ¸
			"ğŸŸ¡", "ğŸŸ¢", "âšª", "ğŸ”˜",
			"âšª", "ğŸ”´", "ğŸ”µ"
		];
		this.blacklist = [ 								// ë¸”ë™ë¦¬ìŠ¤íŠ¸ ëª…ë‹¨
			"ê·€ë¦¬", "Knife", "í˜„íƒœ", "ì •ì§íŒë„¤ëª¨í˜•", "ì¢†ëª¨í˜•", "ì¢†ì§í•œ", "ë…¸ë¬´ë…¸ë¬´", "MCë¬´í˜„", "MCì¬ì¸", "mcë¬´í˜„", "mcì¬ì¸", "ìš´ì§€", "í•œë‚¨", "ì¬ê¸°í•´", "æœ¨", "ì´ê³¼ì¸", "ì¡°êµ­ë²•ë¬´ë¶€ì¥ê´€", "8 seconds", "ì—ë“œ",
			"6.9", "ì‘ë”©", "ì  ë”ê°ìˆ˜ì„±", "ì  ë” ê°ìˆ˜ì„±", "í•œë…€", "ìŠ¨ìƒ", "Cá´€á´˜á´›á´€ÉªÉ´ Ká´Ê€á´‡á´€", "ì¶•êµ¬ì´ì í†µì‹ ì›", "ì˜ì—­ ì§€í‚¤ê¸°", "ê¸°ê°€ ì™€ì´íŒŒì´ í™ˆ", "Haxcups.cc", "í•´ë¦¬ì¼€ì¸", "ë€ì‡",  "ì—ë“ ", "ì´ˆì½”ì—ëª½", "í‚¹ë¤", "dead"
		];
		this.members;
		this.cntPlayers		 	= 0;					// í”Œë ˆì´ì–´ ì¸ì› ì²´í¬
		this.playersid 			= new Array();			// í”Œë ˆì´ì–´ ê°œì¸ ì•„ì´ë””
		this.ppid 				= new Array();			// í”Œë ˆì´ì–´ ê³µìš© ì•„ì´ë””
		this.address 			= new Array();			// í”Œë ˆì´ì–´ ê³µìš© ì£¼ì†Œ
		this.sleepPlayars 		= new Array();			// ì¥ê¸° ëŒ€ê¸° í”Œë ˆì´ì–´ ëª©ë¡(ìˆ˜ë™)
		this.afkPlayers 		= new Array();			// ì¥ê¸° ëŒ€ê¸° í”Œë ˆì´ì–´ ëª©ë¡(ìë™)
		this.mutedPlayers 		= new Array();			// ì±„íŒ… ê¸ˆì§€ì ëª©ë¡

		this.onPlayerTeamChange = function(player){				// íŒ€ êµì²´
			let i = 0;
			PS.members = room.getPlayerList();

			// ëŒ€ê¸°ì—´ í”Œë ˆì´ì–´ íŒŒì•…
			while(i <= PS.cntPlayers){
				if((AMN.hostLock == true)&&(room.getPlayer(0).team != 0))
					room.setPlayerTeam(0, 0);
				if(PS.sleepPlayars[PS.members[i].id] && (player.team != 0)){
					room.setPlayerTeam(PS.members[i].id, 0);
					break;
				}
				else i++;
			}
			return false;
		}
		this.onPlayerAcivity = function(player){				// í”Œë ˆì´ì–´ ë™ì‘ ì²´í¬
			PS.afkPlayers[i] = TM.getDate();
			return false;
		}
		this.getIdofPlayer = function(pub, name) {				// í”Œë ˆì´ì–´ ID í™•ì¸
			PS.members = room.getPlayerList();

			for(var i = 1; i <= PS.cntPlayers; i++) {
				if(PS.members[i].name == name){ 
					if(pub) return PS.members[i].id;		// ê³µìš© ID
					return i;							// ê°œì¸ ID
				}
			}
			return false;
		};
		this.getNumbers = function(){							// í”Œë ˆì´ì–´ ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸°
			PS.members = room.getPlayerList();
			for(var i = 1; i <= PS.cntPlayers; i++){
				if(PS.members[i]) PS.playersid[PS.members[i].id] = i;
			}
			return PS.members;
		}
		this.getMarks = function(pub, player, fmsg, lmsg){		// í”Œë ˆì´ì–´ ë§ˆí¬ ë¶€ì—¬
			SYS.log(true, ((PS.cntPlayers >= 10) ? "ì „ì²´ " + player.id + '(' + SYS.setLine(PS.playersid[player.id], 2) + ')' : "ì „ì²´ " + player.id + '(' + PS.playersid[player.id] + ')' + PS.checkMarks(player) + lmsg));
			if(pub) return CS.showMsg(fmsg + PS.checkMarks(player) + lmsg);
			else return CS.showMsg(fmsg + PS.checkMarks(player) + lmsg, player.id);
			
		}
		this.getTeamofPlayer = function (player) {				// í”Œë ˆì´ì–´ ì†Œì† í™•ì¸
			PS.members = room.getPlayerList();
			for (var i = 1; i <= 15; i++) {
				if (PS.members[i].id == player.id)
					return player.team;
			}
		};
		this.updatePlayers = function(player) {					// í”Œë ˆì´ì–´ ì •ë³´ ê°±ì‹ 
			let tempPlayers;
			PS.members = room.getPlayerList();
			// í•œ ì¹¸ì”© ì±„ìš°ê¸°
			for(var i = PS.playersid[player.id]; i <= PS.cntPlayers; i++) {
				tempPlayers = PS.members[i + 1];
				PS.members[i + 1] = null;
				PS.members[i] = tempPlayers;
			}
			PS.getNumbers();
			if(AMN.subAdmin[player.id]) AMN.getSubAdmin(PS.members[1]);
			return true;
		};
		this.checkMarks = function(player, team){				// í”Œë ˆì´ì–´ ë§ˆí¬ ì •ë³´
			if(team) return PS.mark[player.team + 4];			// íŒ€ ì±„íŒ… ê°ì§€
			if(player.admin) return PS.mark[0];									// ì£¼ê¶Œí•œ
			else if(AMN.subAdmin[player.id - 1]) return PS.mark[1];				// ë³´ì¡°ê¶Œí•œ
			else if(AMN.checkBlacklists(player.name)) return PS.mark[3];		// ë¸”ë™ë¦¬ìŠ¤íŠ¸
			else return PS.mark[2];												// ì¼ë°˜
		}
		this.updateMarks = function(){							// í”Œë ˆì´ì–´ ë§ˆí¬ ê°±ì‹ 
			PS.members = room.getPlayerList();
			for(let i = 0; i < PS.cntPlayers; i++){
				PS.checkMarks(PS.members[i]);
			}
			return true;
		}
		this.getPosX = function(player){						// í”Œë ˆì´ì–´ Xì¢Œí‘œ
			if(player.team != 0) return player.position.x;
			return false;
		}
		this.getPosY = function(player){						// í”Œë ˆì´ì–´ Yì¢Œí‘œ
			if(player.team != 0) return player.position.y;
			return false;
		}
		this.getPosition = function(player){					// í”Œë ˆì´ì–´ ì¢Œí‘œ
			if(player.team != 0) return player.position;
			return false;
		}
		this.getAddress = function(searchId){					// í”Œë ˆì´ì–´ ê³µìš© ì£¼ì†Œ ê°€ì ¸ì˜¤ê¸°
			return PS.address[searchId];
		}
		this.getPublicID = function(searchId){					// í”Œë ˆì´ì–´ ê³µìš© ì•„ì´ë”” ê°€ì ¸ì˜¤ê¸°
			return PS.ppid[searchId];
		}
		this.setAvatar = function(player, msg){					// ë“±ë²ˆí˜¸ ì„¤ì •
			if(msg.substr(1 ,6) == "avatar") 
				room.setPlayerAvatar(player.id, msg.substr(8, 10));
			else room.setPlayerAvatar(player.id, msg.substr(5, 10));
			return false;
		}
		this.setSleep = function(player, sleep){				// ì¥ê¸° ëŒ€ê¸° í”Œë ˆì´ì–´ ì„¤ì •
			if(sleep) return PS.addSleepPlayer(player);
			return PS.deleteSleepPlayer(player);
		}
		this.setX = function(player, msg){						// í”Œë ˆì´ì–´ Xì¢Œí‘œ
			if((player.team != 0) && player.admin)
				player.position.x = msg.substr(5);
			return false;
		}
		this.setY = function(player, msg){						// í”Œë ˆì´ì–´ Yì¢Œí‘œ
			if((player.team != 0) && player.admin)
				player.position.y = msg.substr(5);
			return false;
		}
		this.setAddress = function(player, address){			// í”Œë ˆì´ì–´ ê³µìš© ì£¼ì†Œ
			if(PS.address[player] == undefined) PS.address[player] = address;
			return false;
		}
		this.setPublicID = function(player, pId){				// í”Œë ˆì´ì–´ ê³µìš© ì•„ì´ë””
			if(!PS.ppid[player] == undefined) PS.ppid[player] = pId;
			return false;
		}
		this.addSleepPlayer = function(player){					// ì¥ê¸° ëŒ€ê¸° í”Œë ˆì´ì–´ ì¶”ê°€
			PS.sleepPlayars[player.id] = true;
			if(player.team != 0) room.setPlayerTeam(player.id, 0);
			CS.alltoChat(player, NC.notice() + player.name + "ë‹˜ì´ ìë¦¬ë¥¼ ë¹„ì› ìŠµë‹ˆë‹¤.", true);
			NC.announce(NC.notice() + "ìë¦¬ë¥¼ ë¹„ì› ìŠµë‹ˆë‹¤. ê²Œì„ì— ë‹¤ì‹œ ì°¸ì—¬í•˜ë ¤ë©´ ëª…ë ¹ì–´ë¥¼ í•œ ë²ˆ ë” ì…ë ¥í•˜ì„¸ìš”. " + CM.recommendCom("ê´€ë ¨", "!afk"), player.id, "green", 5, 1);
			SYS.log(true, "ëŒ€ê¸°ì—´ ì¶”ê°€: " + '[' + player.id + '] '  + player.name);
			return false;
		}
		this.resetAvatar = function(player){					// ë“±ë²ˆí˜¸ ì´ˆê¸°í™”
			PS.members = room.getPlayerList();
			room.setPlayerAvatar(player.id, PS.members[i].id);
			return false;
		}
		this.deleteSleepPlayer = function(player){				// ì¥ê¸° ëŒ€ê¸° í”Œë ˆì´ì–´ ì œê±°
			PS.sleepPlayars[player.id] = false;
			CS.alltoChat(player, NC.notice() + player.name + "ë‹˜ì€ ì§€ê¸ˆë¶€í„° ê²Œì„ ì°¸ì—¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.", true);
			NC.announce(NC.notice() + "ê²Œì„ì— ë°”ë¡œ ì°¸ì—¬í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤! " + CM.recommendCom("ê´€ë ¨", "!join"), player.id, "green", 5, 1);
			SYS.log(true, "ëŒ€ê¸°ì—´ ì œê±°: " + '[' + player.id + '] '  + player.name);
			return false;
		}
	}
}
//-----------------------------------------------------------------------
// ì‹œê°„ ë§¤ë‹ˆì € í´ë˜ìŠ¤
//-----------------------------------------------------------------------
class TimeManager{													
	constructor(){
		this.y; this.m; this.d;			// ì—°, ì›”, ì¼
		this.h; this.min; this.sec		// ì‹œ, ë¶„, ì´ˆ
		this.co = '-'; this.ti = ':';
		this.temp = Date.getMinutes;
		//-----------------------ë‚ ì§œ ë° ì‹œê°„----------------------------------------------
		this.getDate = function(){ 								// ë‚ ì§œ ë° ì‹œê°„ ë°˜í™˜
			return TM.updateDate();
		}
		this.updateTimsg = function(){							// ë‚ ì§œ ë° ì‹œê°„ ê°±ì‹ 
			date = new Date();
			TM.y = date.getFullYear(); TM.m = (date.getMonth() + 1); TM.d = date.getDate();
			TM.h = date.getHours(); TM.min = date.getMinutes(); TM.sec = date.getSeconds();
			return date;
		}
		this.showDate = function(){ 							// ë‚ ì§œ ë° ì‹œê°„ ì¶œë ¥
			TM.getDate();
			return (TM.showTimsg() + '| ' + TM.showTime());
		}
		this.updateNums = function(kind, width){				// xx í˜•ì‹ìœ¼ë¡œ ë§ì¶”ê¸°
			kind = kind + '';
			return kind.length >= width ? kind : new Array(width - kind.length + 1).join('0') + kind;
		}
		this.optimizationTime = function(){						// ë‹¨ìœ„ ë³´ì •
			TM.updateNums(TM.m, 2);
			TM.updateNums(TM.d, 2);
			TM.updateNums(TM.h, 2);
			TM.updateNums(TM.min, 2);
			TM.updateNums(TM.sec, 2);
		}
		//-----------------------ë‚ ì§œ----------------------------------------------------
		this.getTimsg = function(){ 							// ë‚ ì§œ ë°˜í™˜
			return TM.updateTimsg();
		}
		this.getMonth = function(){								// ì›” ë³€í™˜
			return TM.updateMonth();
		}
		this.updateDate = function(){							// ë‚ ì§œ ê°±ì‹ 
			date = new Date();
			TM.y = date.getFullYear(); TM.m = (date.getMonth() + 1); TM.d = date.getDate();
			return date;
		}
		this.updateMonth = function(){							// ì›” ê°±ì‹ 
			TM.m = date.getMonth() + 1;
			return TM.m;
		}		
		this.showTimsg = function(){ 							// ë‚ ì§œ ì¶œë ¥
			TM.getTimsg(); 
			TM.optimizationTime();
			return (
				TM.y
				+ TM.co + TM.updateNums(TM.m, 2)
				+ TM.co + TM.updateNums(TM.d, 2)
			);
		}	
		this.showMonth = function(){							// ì›” ì¶œë ¥
			return TM.updateNums(TM.getMonth(), 2);
		}
		//-----------------------ì‹œê°„----------------------------------------------------
		this.getTime = function(){ 								// ì‹œê°„ ë°˜í™˜
			return TM.updateTime();
		}
		this.updateTime = function(){							// ì‹œê°„ ê°±ì‹ 
			date = new Date();
			TM.h = date.getHours(); TM.min = date.getMinutes(); TM.sec = date.getSeconds();
			// ì´ˆ ë‹¨ìœ„ë¡œ ë°˜í™˜
			return ((TM.h * 3600) + (TM.min * 60) + TM.sec);
		}	
		this.showTime = function(){ 							// ì‹œê°„ ì¶œë ¥
			TM.getTime(); 
			TM.optimizationTime();

			return (
				TM.updateNums(TM.h, 2)
				+ TM.ti + TM.updateNums(TM.min, 2)
				+ TM.ti + TM.updateNums(TM.sec, 2)
			);
		}
		this.showNormalTime = function(){						// Windows ì‘ì—… í‘œì‹œì¤„ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥
			TM.getTime(); 
			TM.optimizationTime();

			// ì˜¤í›„
			if(TM.h >= 12)
				return ('|' + (TM.updateNums(TM.h, 2) - 12) + TM.ti + TM.updateNums(TM.min, 2) + " PM" + '|');
			// ì˜¤ì „
			return ('|' + TM.updateNums(TM.h, 2) + TM.ti + TM.updateNums(TM.min, 2) + " AM" + '|');
		}
		
	}
}
//-----------------------------------------------------------------------
// ì‹œìŠ¤í…œ í´ë˜ìŠ¤
//-----------------------------------------------------------------------
class IoSystem{			
	constructor(){
		// ì½˜ì†”ì°½ ì…ì¶œë ¥
		this.initialized = false;
		this.log = function(io, msg){
			if(msg){
				if(!io) return console.log(TM.showDate() + ' â—€ ' + msg);		// ì…ë ¥
				else return console.log(TM.showDate() + ' â–¶ ' + msg);			// ì¶œë ¥
			}
		}
		this.getInit = function(){ return SYS.initialized; }
		this.setInit = function(){ 
			SYS.log(true, "ì„œë²„ ì˜¤í”ˆ");
			SYS.initialized = true;
		}
		this.setLine = function(amount, line){									// 	ìë¦¿ìˆ˜ êµì •
			let list = 1;

			for(let i = 1; i < line; i++)
				list *= 10;
			return (amount < list ? String('0' + amount) : amount);
		}
	}
}

var GM 	= new GameManager();		// ê²Œì„ ë§¤ë‹ˆì € í´ë˜ìŠ¤
var AMN = new Administration();		// ê´€ë¦¬ í´ë˜ìŠ¤
var NC 	= new Notice();				// ì•Œë¦¼ í´ë˜ìŠ¤
var CS 	= new ChatSystem();			// ì±„íŒ… ì‹œìŠ¤í…œ í´ë˜ìŠ¤
var CM 	= new Commands();			// ëª…ë ¹ì–´ í´ë˜ìŠ¤
var PS 	= new Player();				// í”Œë ˆì´ì–´ í´ë˜ìŠ¤
var TM 	= new TimeManager();		// ì‹œê°„ ê´€ë¦¬ í´ë˜ìŠ¤
var SYS = new IoSystem();			// ì‹œìŠ¤í…œ í´ë˜ìŠ¤

//-----------------------------------------------------------------------
// ëª…ë ¹ì–´
//-----------------------------------------------------------------------
var commands = {					
	"!help": CM.comHelp, "!í—¬í”„": CM.comHelp, "!ë„ì›€": CM.comHelp, "!ëª…ë ¹" : CM.comHelp, "!ëª…ë ¹ì–´" : CM.comHelp, "!ã…—ë””ã…”" : CM.comHelp,
	"!bothelp" : CM.botHelp, "!ë´‡í—¬í”„" : CM.botHelp, "!ë´‡ë°©" : CM.botHelp, "ë´‡ë°©ë„ì›€ë§" : CM.botHelp, "ã… ã…ì†Œë””ã…”" : CM.botHelp, 
	"!maphelp" : CM.mapHelp, "!ë§µë„ì›€" : CM.mapHelp, "!ë§µë„ì›€ë§" : CM.mapHelp, "!ë§µí—¬í”„" : CM.mapHelp, "!ìœ ì¦ˆë§µ" : CM.mapHelp, "!ìœ ì¦ˆë§µë„ì›€ë§" : CM.mapHelp, "!ã…¡ë©”ã…—ë””ã…”" : CM.mapHelp, 
	"!chathelp" : CM.chatHelp, "!ì±„íŒ…" : CM.chatHelp, "!ì±—" : CM.chatHelp, "!ì±—í—¬í”„" : CM.chatHelp, "!ì±„íŒ…ëª…ë ¹ì–´" : CM.chatHelp, "!ì±—ë„ì›€" : CM.chatHelp, "!ì±—ë„ì›€ë§" : CM.chatHelp, "!ì´˜ì†Œë””ã…”" : CM.chatHelp,
	"!etchelp" : CM.etcHelp, "!ê¸°íƒ€í—¬í”„" : CM.etcHelp, "!ê¸°íƒ€ë„ì›€" : CM.etcHelp, "!ê¸°íƒ€ë„ì›€ë§" : CM.etcHelp, "!ê¸°íƒ€" : CM.etcHelp, "!ã„·ã……ì´ˆë””ã…”" : CM.etcHelp, 
	"?mark" : CM.qMark, "?ì±„íŒ…" : CM.qMark, "?ì´˜ã……" : CM.qMark, "?ë§ˆí¬" : CM.qMark,
	"!avatar": PS.setAvatar, "!ì•„ë°”íƒ€": PS.setAvatar, "!ã…‡ã…‚ã…Œ": PS.setAvatar, "!ã…ã…ã…ã……ã…ã„±": PS.setAvatar,
	"!clear_avatar": PS.setAvatar, "!reset_avatar": PS.setAvatar, "!í´ë¦¬ì–´_ì•„ë°”íƒ€": PS.setAvatar, "!ã…‹ã„¹ã…‡_ã…‡ã…‚ã…Œ": PS.setAvatar, "!ì¹Ÿã…ã„±_ã…ã…ã…ã……ã…ã„±": PS.setAvatar, "!ë¦¬ì…‹_ì•„ë°”íƒ€": PS.setAvatar, 
	"!clearavatar": PS.setAvatar, "!resetavatar": PS.setAvatar, "!í´ë¦¬ì–´ì•„ë°”íƒ€": PS.setAvatar, "!ã…‹ã„¹ã…‡ã…‡ã…‚ã…Œ": PS.setAvatar, "!ì¹Ÿã…ã„±ã…ã…ã…ã……ã…ã„±": PS.setAvatar, "!ë¦¬ì…‹ì•„ë°”íƒ€": PS.setAvatar, 
	"!adminhelp": AMN.adminHelp,"!ì–´ë“œë¯¼í—¬í”„": AMN.adminHelp,"!ì–´ë“œë¯¼ë„ì›€ë§": AMN.adminHelp,"!ì–´ë“œë¯¼ë„ì›€": AMN.adminHelp,"!ì–´ë“œí—¬í”„": AMN.adminHelp,"!ì–´ë“œë„ì›€ë§": AMN.adminHelp, "!ì–´ë“œë¯¼": AMN.adminHelp,
	"!adminhelpcom": AMN.adminComHelp, "!ahc": AMN.adminComHelp, "!ëª¿": AMN.adminComHelp, 
	"p": AMN.putPause,
	"!p": AMN.unPause,

	"!maplist" : CM.helpMaps, "!cm" : CM.helpMaps, "!ë§µë¦¬ìŠ¤íŠ¸" : CM.helpMaps,"!ë§µëª©ë¡" : CM.helpMaps,"!map" : CM.helpMaps,"!ë§µ" : CM.helpMaps,"!ìœ ì¦ˆë§µ" : CM.helpMaps,

	"!red" : CM.setJoinRed, "!Red" : CM.setJoinRed, "!ë ˆë“œ" : CM.setJoinRed,"!ë ˆ" : CM.setJoinRed,"!ã„¹ã„·" : CM.setJoinRed, "!ã„±ã„·ã…‡": CM.setJoinRed,
	"!blue" : CM.setJoinBlue,"!Blue" : CM.setJoinBlue,"!ë¸”ë£¨" : CM.setJoinBlue,"!ë¸”" : CM.setJoinBlue,"!ã…‚ã„¹" : CM.setJoinBlue,"!ã… ã…£ã…•ã„·" : CM.setJoinBlue,"!ì ë£¨" : CM.setJoinBlue,"!ì " : CM.setJoinBlue,
	"!spec" : CM.setJoinSpec, "!ìŠ¤í™" : CM.setJoinSpec, "!ìŠ¤íŒ©" : CM.setJoinSpec, "!ìŠ¤" : CM.setJoinSpec, "!ê´€ì¤‘ì„" : CM.setJoinSpec, "!ê´€ì¤‘" : CM.setJoinSpec,"!ê´€ì „ì„" : CM.setJoinSpec, "!ê´€ì „" : CM.setJoinSpec, "!ê´€" : CM.setJoinSpec,
	"!afk" : CM.setSleep, "!ã…ë¼" : CM.setSleep, "!ì ìˆ˜" : CM.setSleep, 
	"!join" : CM.helpJoinP, "!joinhelp" : CM.helpJoinP, "!helpjoin" : CM.helpJoinP, "!enter" : CM.helpJoinP, "!enterhelp" : CM.helpJoinP, "!helpenter" : CM.helpJoinP, "!ì¡°ì¸" : CM.helpJoinP, "!ì…ì¥" : CM.helpJoinP, 
	"!íˆ¬ì…" : CM.helpJoinP, "íˆ¬ì…" : CM.helpJoinP, "íˆ¬ì…?" : CM.helpJoinP, "íˆ¬ì…!" : CM.helpJoinP, "íˆ¬ì…í•´" : CM.helpJoinP, "íˆ¬ì…í•˜ì…ˆ" : CM.helpJoinP, "íˆ¬ì…ìš”" : CM.helpJoinP,"ë„£ì–´" : CM.helpJoinP, 
	"ë„£ì–´ì¤˜" : CM.helpJoinP,"ë„£ì–´ë¼" : CM.helpJoinP,"ë„£ì–´ë´ë¼" : CM.helpJoinP,"ë„£ì–´ì£¼ì„¸ìš”" : CM.helpJoinP,"íˆ¬ì…í•´ì£¼ì„¸ìš”" : CM.helpJoinP,
	"íˆ¬ì…í•´ë“œë ¤" : CM.helpJoinA, "íˆ¬ì…ëª…ë ¹ì–´" : CM.helpJoinA, "íˆ¬ì…ë„ì›€ë§" : CM.helpJoinA, 
	"!gox" : PS.setX, "!goy" : PS.setY, 
 
	"!!1921" : AMN.getAdmin,			// ê¶Œí•œ ì–»ê¸°
	"!admin": AMN.setAdmin,				// ê¶Œí•œ ë™ì  í• ë‹¹
	// ê¶Œí•œ ì–»ê¸°(ì˜¤íƒ€)
	"!!" : AMN.missPassword,

	"!rr": AMN.setReset, "!ã„±ã„±": AMN.setReset,"!ë¦¬": AMN.setReset, "!re": AMN.setReset,		// ë‹¤ì‹œ ì‹œì‘
	"!r" : AMN.setAutoReset, "!ã„±" : AMN.setAutoReset,  "!ê³ " : AMN.setAutoReset, 				// ìë™ ì¬ì‹œì‘
	"!clearbans" : AMN.setClearBans, "!cb" : AMN.setClearBans, 					// ë°´ ì´ˆê¸°í™”
	// íŒ€ ì´ë™ ì œí•œ(ì „ì²´)
	"!lock" : AMN.setTeamsLock, "!l" : AMN.setTeamsLock, "!L" : AMN.setTeamsLock, "!ë½" : AMN.setTeamsLock, "!fkr" : AMN.setTeamsLock,
	"!host" : AMN.setHostLock,

	"!set_pw": AMN.setPassword,										// ë¹„ë²ˆ ì„¤ì •
	"!clear_pw": AMN.releasePassword,								// ë¹„ë²ˆ í•´ì œ
	"!show_pw": AMN.showPassword,									// ë¹„ë²ˆ ì¶œë ¥
	"!score" : AMN.setScore,     									// ì ìˆ˜ ì œí•œ
	"!time" : AMN.setTime, "!ì œí•œì‹œê°„" : AMN.setTime,				// ì‹œê°„ ì œí•œ
	"!load" : CM.loadMap, "!ã…£ã…ã…ã…‡" : CM.loadMap,											// ê¸°ë³¸ ë‚´ì¥ë§µ
	"!lock_map" : AMN.setMapLock, "!lockmap" : AMN.setMapLock, "!lmap" : AMN.setMapLock,	// ë§µ ê³ ì •
	"!ë„" : CM.plaster,														// ë„ë°° ë°©ì§€ ë¬¸ì
	"!mute": AMN.getMute,	"!ã…¡ã…•ã……ã„·": AMN.getMute,						// ì±„ê¸ˆ ì„¤ì •
	"!unmute": AMN.releaseMute, "!ã…•ã…œã…¡ã…•ã……ã„·": AMN.releaseMute, 			// ì±„ê¸ˆ í’€ê¸°
	"!rec" : CM.setRecording,"!ë…¹í™”" : CM.setRecording, "!shrghk" : CM.setRecording,	// ë…¹í™” ì‹œì‘&ì¢…ë£Œ

	"!a": CS.allChat, "!ì˜¬" : CS.allChat, "!ì „ì²´" : CS.allChat, "!ì „" : CS.allChat,		// ì „ì²´ ì±„íŒ…
	"!t" : CS.teamChat, "!íŒ€" : CS.teamChat, "!ã……" : CS.teamChat, "!ã…Œ" : CS.teamChat,	// íŒ€ ì±„íŒ…
	"!e" : CS.whisperChat, "!ê·“" : CS.whisperChat, "!ã„·" : CS.whisperChat,				// ê°œì¸ ì±„íŒ…(ê·“ì†ë§)
	
	// í˜¸ì¶œ
	"!aboutinfo" : CM.infoRoom,"!info" : CM.infoRoom,"!about" : CM.infoRoom,
	"!aboutver" : CM.infoRoom,"!verinfo" : CM.infoRoom,"!version" : CM.infoRoom,"!ë²„ì „" : CM.infoRoom, "!ver" : CM.infoRoom, "!ì •ë³´" : CM.infoRoom,
	
	// ì´ìŠ¤í„° ì—ê·¸
	"!joke": CM.joke, "!ë†ë‹´": CM.joke, "!ì¡°í¬": CM.joke, "!ë„ë‹´": CM.joke, "!ì•ŒíŒŒê³ ": CM.joke, "!ë„¤ëª¨í˜•": CM.jongikannemohyung, "!ì •ë„¤": CM.jongikannemohyung,
	"í‚¹ì¹˜ë§Œ": CM.hawawa, "ê·¸ì¹˜ë§Œ": CM.hawawa,"ì†ë‚˜": CM.hawawa,"ë°”ì¹´ë‚˜": CM.hawawa, "!ì •ì§í•œë„¤ëª¨í˜•": CM.jongikannemohyung,
	"ë ¨ë‹˜" : CM.taebo, "ì¡°í˜œë ¨" : CM.taebo, "í˜œë ¨" : CM.taebo, "íƒœë³´" : CM.taebo, "ì ˆëŒ€íƒœë³´í•´" : CM.taebo, "íƒœë³´í•´" : CM.taebo, 
}
// í”Œë ˆì´ì–´ ì…ì¥
room.onPlayerJoin = function(player) { return GM.onPlayerJoin(player); }			
// í”Œë ˆì´ì–´ í‡´ì¥
room.onPlayerLeave = function(player) { return GM.onPlayerLeave(player); }		
room.onPlayerAcivity = function(){ return PS.onPlayerAcivity() }
// í”Œë ˆì´ì–´ ê°•ì œ í‡´ì¥
room.onPlayerKicked = function(kickedPlayer, reason, ban, byPlayer){ return AMN.onPlayerKicked(kickedPlayer, reason, ban, byPlayer) }
// í”Œë ˆì´ì–´ ê¶Œí•œ íšë“&ë°•íƒˆ
room.onPlayerAdminChange = function(player){ return AMN.onPlayerAdminChange(player) }		
// ë§µ êµì²´
room.onStadiumChange = function(mapName){ return GM.onStadiumChange(mapName); }			
// ì±„íŒ… ì‹œìŠ¤í…œ
room.onPlayerChat = function(player, msg){ return CS.onPlayerChat(player, msg); }			
// ë§í¬
room.onRoomLink = function(url){ return GM.onRoomLink(url); }

// ì¢Œí‘œ ì´ˆê¸°í™”
room.onPositionsReset = function(){ return GM.onPositionsReset(); }				
// ê³µ ì°¼ì„ ë•Œ
room.onPlayerBallKick = function(player){ return GM.onPlayerBallKick(player); }			
// ê³¨ ë¨¹í ë•Œ
room.onTeamGoal = function(team){ return GM.onTeamGoal(team); }					
// í‚¥ ì œí•œ ì„¤ì •
room.onKickRateLimitSet = function(min, rate, burst, player){ return GM.onKickRateLimitSet(min, rate, burst, player); }
// íŒ€ êµì²´
room.onPlayerTeamChange = function(player){ return PS.onPlayerTeamChange(player) }	
// íŒ€ ìŠ¹ë¦¬
room.onTeamVictory = function(scores){ return GM.onTeamVictory(scores); }			

// ê²Œì„ ì‹œì‘
room.onGameStart = function(){ return GM.onGameStart(); }							
// ê²Œì„ ë„ì¤‘
room.onGameTick = function(){ return GM.onGameTick(); }							
// ê²Œì„ ì¢…ë£Œ
room.onGameStop = function(){ return GM.onGameStop(); }							
// ê²Œì„ ì¤‘ë‹¨
room.onGamePause = function(byPlayer){ return GM.onGamePause(byPlayer);}			
// ê²Œì„ ì¬ê°œ
room.onGameUnpause 	= function(byPlayer){ return GM.onGameUnpause(byPlayer); }	
